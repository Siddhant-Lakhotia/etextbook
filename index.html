<!DOCTYPE html>
<html lang="en" data-theme="light">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Interactive Mathematics Textbook: Integers</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Merriweather:wght@300;400;700&family=Open+Sans:wght@300;400;600&display=swap" rel="stylesheet">
    <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
    <script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --bg-color: #f5f7fa;
            --text-color: #333;
            --container-bg: white;
            --header-color: #2c3e50;
            --primary-color: #3498db;
            --secondary-bg: #f8f9fa;
            --border-color: #ecf0f1;
            --success-color: #27ae60;
            --warning-color: #f39c12;
            --danger-color: #e74c3c;
            --shadow-color: rgba(0, 0, 0, 0.1);
        }

        [data-theme="dark"] {
            --bg-color: #121212;
            --text-color: #e0e0e0;
            --container-bg: #1e1e1e;
            --header-color: #bb86fc;
            --primary-color: #03dac6;
            --secondary-bg: #2d2d2d;
            --border-color: #333;
            --success-color: #4caf50;
            --warning-color: #ff9800;
            --danger-color: #f44336;
            --shadow-color: rgba(0, 0, 0, 0.3);
        }

        body {
            font-family: 'Open Sans', sans-serif;
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            padding: 20px;
            transition: background-color 0.3s, color 0.3s;
        }

        .textbook-container {
            max-width: 210mm;
            min-height: 297mm;
            margin: 0 auto 20px auto;
            background-color: var(--container-bg);
            box-shadow: 0 0 30px var(--shadow-color);
            position: relative;
            overflow: hidden;
            page-break-after: always;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .page {
            padding: 25mm 20mm;
            position: relative;
            min-height: 297mm;
        }

        .page-number {
            position: absolute;
            bottom: 20px;
            right: 30px;
            font-size: 14px;
            color: #666;
        }

        .header {
            border-bottom: 2px solid var(--header-color);
            padding-bottom: 15px;
            margin-bottom: 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chapter-title {
            font-family: 'Merriweather', serif;
            color: var(--header-color);
            font-size: 28px;
            font-weight: 700;
        }

        .chapter-subtitle {
            color: #7f8c8d;
            font-size: 16px;
            font-weight: 400;
            margin-top: 5px;
        }

        [data-theme="dark"] .chapter-subtitle {
            color: #b0b0b0;
        }

        .logo {
            font-size: 24px;
            font-weight: 700;
            color: var(--primary-color);
        }

        .section-title {
            font-family: 'Merriweather', serif;
            color: var(--header-color);
            font-size: 22px;
            margin: 30px 0 15px 0;
            padding-bottom: 8px;
            border-bottom: 1px solid var(--border-color);
        }

        .subsection-title {
            font-family: 'Merriweather', serif;
            color: var(--header-color);
            font-size: 18px;
            margin: 20px 0 10px 0;
        }

        .content-box {
            background-color: var(--secondary-bg);
            border-left: 4px solid var(--primary-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 4px 4px 0;
        }

        .interactive-box {
            background-color: color-mix(in srgb, var(--primary-color) 10%, transparent);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
            position: relative;
        }

        .example-box {
            background-color: color-mix(in srgb, var(--warning-color) 10%, transparent);
            border-left: 4px solid var(--warning-color);
            padding: 15px;
            margin: 15px 0;
            border-radius: 0 4px 4px 0;
        }

        .step-box {
            background-color: var(--secondary-bg);
            border: 1px dashed var(--border-color);
            padding: 12px;
            margin: 10px 0;
            border-radius: 4px;
        }

        .practice-box {
            background-color: color-mix(in srgb, var(--success-color) 10%, transparent);
            border: 1px solid var(--success-color);
            padding: 20px 40px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .video-container {
            background-color: var(--header-color);
            color: white;
            padding: 15px;
            border-radius: 8px;
            margin: 20px 0;
            display: flex;
            align-items: center;
        }

        .video-icon {
            font-size: 32px;
            margin-right: 15px;
            color: var(--danger-color);
        }

        .exam-footer {
            background-color: color-mix(in srgb, var(--text-color) 5%, transparent);
            padding: 12px;
            margin-top: 25px;
            border-radius: 4px;
            font-size: 14px;
        }

        .checklist {
            margin: 20px 0;
        }

        .checklist-item {
            display: flex;
            align-items: center;
            margin: 8px 0;
        }

        .checklist-box {
            width: 20px;
            height: 20px;
            border: 2px solid var(--primary-color);
            border-radius: 4px;
            margin-right: 10px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-shrink: 0;
        }

        .checklist-box.checked {
            background-color: var(--primary-color);
            color: white;
        }

        .checklist-box.checked:after {
            content: "✓";
            font-size: 14px;
        }

        .drag-drop-container {
            display: flex;
            justify-content: space-between;
            gap: 20px;
            padding: 20px;
            background-color: color-mix(in srgb, var(--primary-color) 5%, transparent);
            border-radius: 8px;
            margin: 20px 0;
        }

        .drag-source, .drop-target {
            min-height: 150px;
            width: 48%;
            border: 2px dashed var(--primary-color);
            border-radius: 8px;
            padding: 15px;
            position: relative;
        }

        .drop-target {
            padding-bottom: 50px;
        }

        .drag-item {
            background-color: var(--primary-color);
            color: white;
            padding: 10px 15px;
            margin: 8px 0;
            border-radius: 4px;
            cursor: grab;
            text-align: center;
            user-select: none;
            transition: transform 0.2s, opacity 0.2s;
            z-index: 10;
            position: relative;
        }

        .drag-item:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 8px rgba(0,0,0,0.2);
        }

        .drag-item.dragging {
            opacity: 0.5;
            transform: scale(0.95);
            z-index: 1000;
            position: fixed;
            pointer-events: none;
        }

        .number-line {
            height: 60px;
            background-color: var(--secondary-bg);
            border-top: 2px solid var(--header-color);
            border-bottom: 2px solid var(--header-color);
            position: relative;
            margin: 25px 0;
        }

        .number-tick {
            position: absolute;
            bottom: 0;
            width: 2px;
            height: 20px;
            background-color: var(--header-color);
            transform: translateX(-50%);
        }

        .number-label {
            position: absolute;
            top: 15px;
            transform: translateX(-50%);
            font-size: 14px;
            font-weight: bold;
        }

        .number-point {
            position: absolute;
            width: 16px;
            height: 16px;
            background-color: var(--danger-color);
            border-radius: 50%;
            transform: translate(-50%, -250%);
            top: 50%;
            cursor: pointer;
            z-index: 2;
        }

        .slider-container {
            margin: 20px 0;
            padding: 15px;
            background-color: var(--secondary-bg);
            border-radius: 8px;
        }

        .slider-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 10px;
        }

        .slider {
            width: 100%;
            height: 8px;
            -webkit-appearance: none;
            background: var(--border-color);
            border-radius: 4px;
            outline: none;
        }

        .slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: var(--primary-color);
            cursor: pointer;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        .answer-toggle {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 15px;
            border-radius: 4px;
            cursor: pointer;
            margin-top: 10px;
            font-family: 'Open Sans', sans-serif;
            transition: background-color 0.2s, transform 0.1s;
            position: relative;
            z-index: 5;
        }

        .answer-toggle:hover {
            background-color: color-mix(in srgb, var(--primary-color) 80%, black);
            transform: translateY(-1px);
        }

        .answer-toggle:active {
            transform: translateY(1px);
        }

        .hidden-answer {
            display: none;
            margin-top: 15px;
            padding: 15px;
            background-color: var(--secondary-bg);
            border-left: 4px solid var(--success-color);
            border-radius: 0 4px 4px 0;
        }

        .navigation {
            display: flex;
            justify-content: space-between;
            position: fixed;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background-color: var(--container-bg);
            padding: 10px 20px;
            border-radius: 50px;
            box-shadow: 0 4px 15px var(--shadow-color);
            z-index: 1000;
            width: 350px;
            transition: background-color 0.3s, box-shadow 0.3s;
        }

        .nav-btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 10px 20px;
            border-radius: 4px;
            cursor: pointer;
            font-family: 'Open Sans', sans-serif;
            font-weight: 600;
            transition: background-color 0.2s;
            position: relative;
            z-index: 5;
        }

        .nav-btn:hover:not(:disabled) {
            background-color: color-mix(in srgb, var(--primary-color) 80%, black);
        }

        .nav-btn:disabled {
            background-color: var(--border-color);
            cursor: not-allowed;
            opacity: 0.6;
        }

        .progress-bar {
            height: 6px;
            background-color: var(--border-color);
            margin: 20px 0;
            border-radius: 3px;
            overflow: hidden;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            z-index: 1000;
        }

        .progress-fill {
            height: 100%;
            background-color: var(--primary-color);
            width: 0%;
            transition: width 0.5s ease;
        }

        table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        th, td {
            border: 1px solid var(--border-color);
            padding: 12px;
            text-align: left;
        }

        th {
            background-color: var(--secondary-bg);
            font-weight: 600;
        }

        tr:nth-child(even) {
            background-color: color-mix(in srgb, var(--secondary-bg) 50%, transparent);
        }

        .math-formula {
            font-family: "Times New Roman", Times, serif;
            font-size: 18px;
            padding: 10px;
            background-color: var(--secondary-bg);
            border-radius: 4px;
            margin: 10px 0;
            text-align: center;
        }

        .key-term {
            background-color: color-mix(in srgb, var(--warning-color) 20%, transparent);
            border-bottom: 2px dotted var(--warning-color);
            font-weight: 600;
            cursor: help;
            position: relative;
            padding: 0 2px;
        }

        .key-term:hover::after {
            content: attr(data-definition);
            position: absolute;
            bottom: 100%;
            left: 0;
            background-color: var(--header-color);
            color: white;
            padding: 8px;
            border-radius: 4px;
            font-size: 14px;
            width: 200px;
            z-index: 100;
            box-shadow: 0 4px 8px var(--shadow-color);
        }

        .real-life-problem {
            background-color: color-mix(in srgb, var(--primary-color) 10%, transparent);
            border: 1px solid var(--primary-color);
            border-radius: 8px;
            padding: 20px;
            margin: 20px 0;
        }

        .problem-icon {
            font-size: 24px;
            color: var(--primary-color);
            margin-right: 10px;
        }

        .bank-balance, .game-score, .temperature-display, .elevation-display, .shopping-cart, .quiz-score {
            padding: 10px;
            border-radius: 5px;
            text-align: center;
            font-weight: bold;
            margin: 10px 0;
            color: white;
        }

        .bank-balance { background-color: var(--success-color); }
        .bank-balance.negative { background-color: var(--danger-color); }
        .game-score { background-color: #9b59b6; }
        .temperature-display { background-color: var(--primary-color); }
        .elevation-display { background-color: var(--warning-color); }
        .shopping-cart { background-color: #1abc9c; }
        .quiz-score { background-color: var(--danger-color); }

        /* Theme Toggle Button */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            z-index: 1001;
        }

        #themeToggle {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 8px 16px;
            border-radius: 20px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 14px;
            transition: all 0.3s;
            box-shadow: 0 2px 8px var(--shadow-color);
            position: relative;
            z-index: 1001;
        }

        #themeToggle:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px var(--shadow-color);
        }

        /* Clear All Button Styling */
        .clear-all-btn {
            position: absolute;
            bottom: 10px;
            right: 10px;
            background-color: var(--danger-color);
            color: white;
            border: none;
            padding: 6px 12px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s;
            z-index: 5;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .clear-all-btn:hover {
            background-color: color-mix(in srgb, var(--danger-color) 80%, black);
            transform: scale(1.05);
        }

        .clear-all-btn:active {
            transform: scale(0.95);
        }

        /* Animation for fade in/out */
        @keyframes fadeInOut {
            0% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
            20% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            80% { opacity: 1; transform: translate(-50%, -50%) scale(1); }
            100% { opacity: 0; transform: translate(-50%, -50%) scale(0.8); }
        }

        /* Focus states for accessibility */
        .nav-btn:focus, .answer-toggle:focus, input:focus, select:focus, textarea:focus, .clear-all-btn:focus, #themeToggle:focus {
            outline: 3px solid var(--primary-color);
            outline-offset: 2px;
        }

        /* Dragging ghost element */
        .drag-ghost {
            position: fixed;
            pointer-events: none;
            z-index: 10000;
            opacity: 0.8;
            transform: translate(-50%, -50%);
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 10px;
            }
            
            .textbook-container {
                max-width: 100%;
                margin: 10px auto;
                min-height: auto;
            }
            
            .page {
                padding: 15mm 10mm;
                min-height: auto;
            }
            
            .drag-drop-container {
                flex-direction: column;
            }
            
            .drag-source, .drop-target {
                width: 100%;
                margin-bottom: 20px;
            }
            
            .navigation {
                width: 90%;
                padding: 8px 15px;
            }
            
            .nav-btn {
                padding: 8px 15px;
                font-size: 14px;
            }
            
            .theme-toggle {
                top: 10px;
                right: 10px;
            }
            
            #themeToggle {
                padding: 6px 12px;
                font-size: 12px;
            }
        }

        @media print {
            body {
                background-color: white;
                padding: 0;
            }
            
            .textbook-container {
                box-shadow: none;
                page-break-after: always;
                margin-bottom: 0;
            }
            
            .no-print {
                display: none;
            }
            
            .navigation {
                display: none;
            }
            
            .progress-bar {
                display: none;
            }
            
            .theme-toggle {
                display: none;
            }
            
            [data-theme="dark"] .textbook-container {
                background-color: white !important;
                color: black !important;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle Button -->
    <div class="theme-toggle no-print">
        <button id="themeToggle" class="nav-btn">
            <i class="fas fa-moon"></i> Dark Mode
        </button>
    </div>

    <div class="progress-bar no-print">
        <div class="progress-fill" id="progressFill"></div>
    </div>

    <!-- PAGE 1: Cover Page -->
    <div class="textbook-container" id="page1">
        <div class="page">
            <div class="header" style="border-bottom: none; margin-bottom: 50px;">
                <div class="logo">MathMaster</div>
            </div>
            
            <div style="text-align: center; margin-top: 100px;">
                <h1 style="font-family: 'Merriweather', serif; font-size: 42px; color: var(--header-color); margin-bottom: 20px;">Interactive Mathematics</h1>
                <h2 style="font-size: 36px; color: var(--primary-color); margin-bottom: 30px;">Textbook Series</h2>
                <div style="height: 4px; width: 200px; background-color: var(--primary-color); margin: 30px auto;"></div>
                <h3 style="font-size: 32px; color: var(--header-color); margin-bottom: 40px;">Chapter 1: Integers</h3>
                <p style="font-size: 20px; color: #7f8c8d; max-width: 600px; margin: 0 auto 50px auto;">
                    A comprehensive, self-learning guide to understanding integers with interactive examples, real-world applications, and practice exercises.
                </p>
                
                <div style="background-color: var(--secondary-bg); padding: 30px; border-radius: 8px; max-width: 500px; margin: 0 auto;">
                    <h4 style="font-family: 'Merriweather', serif; color: var(--header-color); margin-bottom: 15px;">What you'll learn:</h4>
                    <ul style="text-align: left; padding-left: 20px;">
                        <li style="margin: 10px 0;">Understanding positive and negative integers</li>
                        <li style="margin: 10px 0;">Representing integers on number line</li>
                        <li style="margin: 10px 0;">Absolute value of integers</li>
                        <li style="margin: 10px 0;">Addition and subtraction of integers</li>
                        <li style="margin: 10px 0;">Properties of integer operations</li>
                        <li style="margin: 10px 0;">Real-world applications of integers</li>
                    </ul>
                </div>
                
                <div style="margin-top: 60px;">
                    <p style="font-style: italic; color: #7f8c8d;">"Mathematics is not about numbers, equations, computations, or algorithms: it is about understanding." – William Paul Thurston</p>
                </div>
            </div>
            
            <div class="page-number">1</div>
        </div>
    </div>

    <!-- PAGE 2: Table of Contents -->
    <div class="textbook-container" id="page2">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">Table of Contents</div>
                    <div class="chapter-subtitle">Chapter 1: Integers</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="section-title">Chapter Structure</div>
            
            <div class="content-box">
                <p>This chapter follows a structured learning path designed for self-paced mastery:</p>
            </div>
            
            <table>
                <tr>
                    <th>Section</th>
                    <th>Title</th>
                    <th>Page</th>
                </tr>
                <tr>
                    <td>1</td>
                    <td>Recap: Natural and Whole Numbers</td>
                    <td>3</td>
                </tr>
                <tr>
                    <td>2</td>
                    <td>Real-Life Examples & Use Cases</td>
                    <td>4</td>
                </tr>
                <tr>
                    <td>3</td>
                    <td>What You'll Learn</td>
                    <td>5</td>
                </tr>
                <tr>
                    <td>4.1</td>
                    <td>Introduction to Integers</td>
                    <td>6</td>
                </tr>
                <tr>
                    <td>4.2</td>
                    <td>Representing Integers on Number Line</td>
                    <td>8</td>
                </tr>
                <tr>
                    <td>4.3</td>
                    <td>Absolute Value of Integers</td>
                    <td>10</td>
                </tr>
                <tr>
                    <td>4.4</td>
                    <td>Addition of Integers</td>
                    <td>12</td>
                </tr>
                <tr>
                    <td>4.5</td>
                    <td>Subtraction of Integers</td>
                    <td>14</td>
                </tr>
                <tr>
                    <td>4.6</td>
                    <td>Properties of Integers</td>
                    <td>16</td>
                </tr>
                <tr>
                    <td>5</td>
                    <td>Chapter Summary</td>
                    <td>18</td>
                </tr>
                <tr>
                    <td>6</td>
                    <td>Self-Assessment Checklist</td>
                    <td>19</td>
                </tr>
                <tr>
                    <td>7</td>
                    <td>Practice Exercises</td>
                    <td>20</td>
                </tr>
            </table>
            
            <div class="section-title" style="margin-top: 30px;">Interactive Features</div>
            
            <div class="checklist">
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Interactive Number Line</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Drag-and-Drop Activities</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Step-by-Step Examples</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Practice with Instant Feedback</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Video Explanations</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Exam Relevance Footnotes</span>
                </div>
            </div>
            
            <div class="page-number">2</div>
        </div>
    </div>

    <!-- PAGE 3: Recap -->
    <div class="textbook-container" id="page3">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">1. Recap</div>
                    <div class="chapter-subtitle">Activating Prior Knowledge</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>So far, we are conversant with <span class="key-term" data-definition="Counting numbers starting from 1: 1, 2, 3, 4, ...">natural numbers</span> and <span class="key-term" data-definition="Natural numbers including 0: 0, 1, 2, 3, ...">whole numbers</span>. In this chapter, we shall introduce integers.</p>
            </div>
            
            <div class="subsection-title">Need for Negative Numbers</div>
            <p>We know that when a smaller whole number is subtracted from a larger whole number, we get a whole number.</p>
            
            <div class="example-box">
                <p><strong>Examples:</strong></p>
                <p>35 - 25 = 10, which is a whole number.</p>
                <p>35 - 35 = 0, which is a whole number.</p>
                <p>But, 25 - 35 = ?</p>
            </div>
            
            <p>Clearly, when a bigger whole number is subtracted from a smaller one, we do not get a whole number.</p>
            
            <div class="interactive-box">
                <p><strong>Try This:</strong> What is 15 - 20 using whole numbers?</p>
                <div style="display: flex; gap: 15px; margin-top: 15px;">
                    <button class="answer-toggle" onclick="toggleAnswer('answer1')">Show Answer</button>
                    <button class="answer-toggle" onclick="toggleAnswer('hint1')">Show Hint</button>
                </div>
                <div id="hint1" class="hidden-answer">
                    <p><strong>Hint:</strong> Think about what happens when you try to take away more than you have.</p>
                </div>
                <div id="answer1" class="hidden-answer">
                    <p><strong>Answer:</strong> 15 - 20 cannot be represented as a whole number. We need a new type of number to represent this difference.</p>
                </div>
            </div>
            
            <p>Thus, the set of all whole numbers is inadequate for subtraction. So, we need to have a new type of numbers which may represent the above difference.</p>
            
            <div class="subsection-title">Quick Self-Check</div>
            
            <div class="practice-box">
                <p><strong>Diagnostic Quiz:</strong> Answer these questions to check your understanding of whole numbers.</p>
                <ol style="margin-left: 20px; margin-top: 15px;">
                    <li style="margin: 10px 0;">What is 25 - 12? <input type="text" id="q1" style="width: 60px; padding: 5px; margin-left: 10px;"></li>
                    <li style="margin: 10px 0;">What is 8 - 8? <input type="text" id="q2" style="width: 60px; padding: 5px; margin-left: 10px;"></li>
                    <li style="margin: 10px 0;">Can you represent 5 - 10 as a whole number? 
                        <select id="q3" style="margin-left: 10px; padding: 5px;">
                            <option value="">Select</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </li>
                </ol>
                <button class="answer-toggle" onclick="checkDiagnosticQuiz()" style="margin-top: 15px;">Check Answers</button>
                <div id="quizResult" class="hidden-answer"></div>
            </div>
            
            <div class="exam-footer">
                <p><strong>Key Insight:</strong> Whole numbers work for addition and for subtraction when minuend ≥ subtrahend. For other cases, we need integers.</p>
            </div>
            
            <div class="page-number">3</div>
        </div>
    </div>

    <!-- PAGE 4: Real-Life Examples -->
    <div class="textbook-container" id="page4">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">2. Real-Life Examples & Use Cases</div>
                    <div class="chapter-subtitle">Why Integers Matter in Daily Life</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>Integers are not just abstract mathematical concepts. They are used extensively in our daily lives to represent situations involving opposites, gains and losses, above and below, etc.</p>
            </div>
            
            <div class="subsection-title">Example 1: Temperature</div>
            <p>We know that the freezing point of water is 0°C.</p>
            
            <div class="interactive-box">
                <p><strong>Temperature Simulator:</strong> Adjust the temperature slider to see how integers represent temperatures above and below freezing.</p>
                
                <div class="slider-container">
                    <div class="slider-label">
                        <span>Temperature: </span>
                        <span id="tempValue">0°C</span>
                    </div>
                    <input type="range" min="-30" max="30" value="0" class="slider" id="tempSlider" oninput="updateTempValue()">
                    <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                        <span>-30°C</span>
                        <span>0°C (Freezing)</span>
                        <span>30°C</span>
                    </div>
                </div>
                
                <div id="tempMessage" style="margin-top: 15px; padding: 10px; background-color: color-mix(in srgb, var(--primary-color) 10%, transparent); border-radius: 4px;">
                    Current temperature: 0°C (Freezing point)
                </div>
            </div>
            
            <p>We represent a:</p>
            <ul style="margin-left: 30px; margin-top: 10px;">
                <li style="margin: 8px 0;">Temperature of 25°C above freezing point as <strong>+25°C</strong> or simply as <strong>25°C</strong>.</li>
                <li style="margin: 8px 0;">Temperature of 25°C below freezing point as <strong>-25°C</strong>.</li>
            </ul>
            
            <div class="subsection-title">Example 2: Elevation</div>
            <p>Heights of places are measured as distance from sea-level.</p>
            
            <div class="example-box">
                <p><strong>Examples:</strong></p>
                <p>A height of 400 m above sea-level is represented as <strong>+400 m</strong> or simply <strong>400 m</strong>.</p>
                <p>A depth of 400 m below sea-level is represented as <strong>-400 m</strong>.</p>
            </div>
            
            <div class="subsection-title">Example 3: Finance</div>
            <p>In banking and finance, integers represent gains and losses:</p>
            
            <div class="drag-drop-container">
                <div class="drag-source">
                    <p><strong>Drag the correct integer to match each situation:</strong></p>
                    <div class="drag-item" draggable="true" data-value="-50">Loss of ₹50</div>
                    <div class="drag-item" draggable="true" data-value="+100">Gain of ₹100</div>
                    <div class="drag-item" draggable="true" data-value="0">No change</div>
                    <div class="drag-item" draggable="true" data-value="-200">Withdrawal of ₹200</div>
                </div>
                
                <div class="drop-target">
                    <p><strong>Drop zone:</strong> Match integers to situations</p>
                    <div id="dropResults" style="min-height: 100px;"></div>
                </div>
            </div>
            
            <div class="exam-footer">
                <p><strong>Real-World Application:</strong> Integers are used in temperature readings, elevation maps, financial transactions, game scores, and scientific measurements.</p>
            </div>
            
            <div class="page-number">4</div>
        </div>
    </div>

    <!-- PAGE 5: What You'll Learn -->
    <div class="textbook-container" id="page5">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">3. What You'll Learn</div>
                    <div class="chapter-subtitle">Chapter Learning Objectives</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>By the end of this chapter, you will be able to master the following concepts and skills related to integers:</p>
            </div>
            
            <div class="checklist">
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span><strong>Define integers</strong> and identify positive and negative integers</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span><strong>Represent integers</strong> on a number line accurately</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span><strong>Compare and order</strong> integers using number line and rules</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Find the <strong>absolute value</strong> of any integer</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span><strong>Add integers</strong> using rules and number line visualization</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span><strong>Subtract integers</strong> by converting to addition of opposites</span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Understand and apply <strong>properties of integer operations</strong></span>
                </div>
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <span>Solve <strong>real-world problems</strong> using integers</span>
                </div>
            </div>
            
            <div class="subsection-title">Success Criteria</div>
            <p>You will know you have successfully mastered this chapter when you can:</p>
            
            <div class="example-box">
                <ol style="margin-left: 20px;">
                    <li style="margin: 10px 0;">Correctly place any integer on a number line</li>
                    <li style="margin: 10px 0;">Determine which of two integers is greater without hesitation</li>
                    <li style="margin: 10px 0;">Calculate sums and differences of integers accurately</li>
                    <li style="margin: 10px 0;">Explain integer concepts in your own words</li>
                    <li style="margin: 10px 0;">Apply integers to solve practical problems</li>
                </ol>
            </div>
            
            <div class="subsection-title">Estimated Time for Completion</div>
            
            <div class="interactive-box">
                <table>
                    <tr>
                        <th>Section</th>
                        <th>Estimated Time</th>
                        <th>Priority</th>
                    </tr>
                    <tr>
                        <td>Introduction to Integers</td>
                        <td>30-45 minutes</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Number Line Representation</td>
                        <td>30-45 minutes</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Absolute Value</td>
                        <td>20-30 minutes</td>
                        <td>Medium</td>
                    </tr>
                    <tr>
                        <td>Addition of Integers</td>
                        <td>45-60 minutes</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Subtraction of Integers</td>
                        <td>45-60 minutes</td>
                        <td>High</td>
                    </tr>
                    <tr>
                        <td>Properties of Integers</td>
                        <td>30-45 minutes</td>
                        <td>Medium</td>
                    </tr>
                    <tr>
                        <td>Practice & Review</td>
                        <td>60-90 minutes</td>
                        <td>High</td>
                    </tr>
                </table>
                <p style="margin-top: 15px; font-style: italic;">Total estimated time: 4-6 hours (self-paced)</p>
            </div>
            
            <div class="exam-footer">
                <p><strong>Tip:</strong> Don't rush through the concepts. Take your time with each section and ensure you understand fully before moving on.</p>
            </div>
            
            <div class="page-number">5</div>
        </div>
    </div>

    <!-- PAGE 6: Introduction to Integers -->
    <div class="textbook-container" id="page6">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.1 Introduction to Integers</div>
                    <div class="chapter-subtitle">Understanding Positive and Negative Numbers</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>Corresponding to natural numbers 1, 2, 3, 4, 5, 6, ..., we introduce new numbers denoted by -1, -2, -3, -4, -5, -6, ..., called <strong>minus one, minus two, minus three</strong>, etc., such that:</p>
                
                <div class="math-formula">
                    1 + (-1) = 0, 2 + (-2) = 0, 3 + (-3) = 0, 4 + (-4) = 0, and so on.
                </div>
                
                <p>1 and -1 are called <strong>opposites</strong> or <strong>additive inverses</strong> of each other.</p>
            </div>
            
            <div class="subsection-title">The Set of Integers</div>
            <p>Thus, we get a new set of numbers:</p>
            
            <div class="example-box" style="text-align: center; font-size: 18px; font-weight: bold;">
                ..., -4, -3, -2, -1, 0, 1, 2, 3, 4, ...
            </div>
            
            <p>These numbers are known as <strong>integers</strong>.</p>
            
            <table>
                <tr>
                    <th>Type</th>
                    <th>Examples</th>
                    <th>Description</th>
                </tr>
                <tr>
                    <td>Positive Integers</td>
                    <td>1, 2, 3, 4, 5, ...</td>
                    <td>Natural numbers (can be written as +1, +2, ...)</td>
                </tr>
                <tr>
                    <td>Negative Integers</td>
                    <td>-1, -2, -3, -4, -5, ...</td>
                    <td>Opposites of natural numbers</td>
                </tr>
                <tr>
                    <td>Zero</td>
                    <td>0</td>
                    <td>Neither positive nor negative</td>
                </tr>
                <tr>
                    <td>Non-negative Integers</td>
                    <td>0, 1, 2, 3, 4, ...</td>
                    <td>Zero and all positive integers</td>
                </tr>
                <tr>
                    <td>Non-positive Integers</td>
                    <td>0, -1, -2, -3, -4, ...</td>
                    <td>Zero and all negative integers</td>
                </tr>
            </table>
            
            <div class="subsection-title">Step-by-Step Example</div>
            
            <div class="step-box">
                <p><strong>Example:</strong> Represent the opposite of gaining ₹200.</p>
                <p><strong>Step 1:</strong> Gaining ₹200 → +200</p>
                <p><strong>Step 2:</strong> Opposite means loss of ₹200 → -200</p>
                <p><strong>Answer:</strong> -200</p>
            </div>
            
            <div class="subsection-title">Practice Exercises</div>
            
            <div class="practice-box">
                <p><strong>Level 1:</strong> Basic Understanding</p>
                <ol style="margin-left: 20px;">
                    <li style="margin: 10px 0;">Write the opposite of:
                        <div style="margin-left: 20px;">
                            a) +17 → <input type="text" id="opp1" style="width: 60px; padding: 5px;"><br>
                            b) -40 → <input type="text" id="opp2" style="width: 60px; padding: 5px;"><br>
                            c) 0 → <input type="text" id="opp3" style="width: 60px; padding: 5px;">
                        </div>
                    </li>
                    <li style="margin: 10px 0;">Which of these are integers? 3, -5, 0, 1/2, 100, -7.8, +9</li>
                </ol>
                
                <button class="answer-toggle" onclick="checkOpposites()" style="margin-top: 15px;">Check Answers</button>
                <div id="oppositesResult" class="hidden-answer"></div>
            </div>
            
            <div class="video-container">
                <div class="video-icon">
                    <i class="fas fa-play-circle"></i>
                </div>
                <div>
                    <p><strong>Video: Introduction to Integers</strong></p>
                    <p>4-minute animated video explaining integers with real-life analogies (temperature, debt, elevation).</p>
                    <button class="answer-toggle" style="margin-top: 10px;" onclick="alert('Video would play here in a full implementation')">Play Video</button>
                </div>
            </div>
            
            <div class="exam-footer">
                <p><strong>This topic appeared in:</strong> CBSE Class 6, 2023, Q2 (Basic definition); ICSE Class 7, 2022, Q1 (Positive/Negative integers); SAT (Basic Math), 2021, Q5 (Opposites); IMO Level 1, 2020, Q1; NTSE Stage 1, 2019, Q3</p>
            </div>
            
            <div class="page-number">6</div>
        </div>
    </div>

    <!-- PAGE 7: Introduction to Integers (Continued) -->
    <div class="textbook-container" id="page7">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.1 Introduction to Integers (Cont.)</div>
                    <div class="chapter-subtitle">Understanding Positive and Negative Numbers</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="subsection-title">Few More Examples</div>
            
            <div class="example-box">
                <p><strong>Example 1:</strong> Opposite of 15 is -15</p>
                <p><strong>Example 2:</strong> Opposite of -23 is +23</p>
                <p><strong>Example 3:</strong> If +50 represents 50 km East, then -50 represents 50 km West</p>
            </div>
            
            <div class="subsection-title">Activity: Opposites Matching Game</div>
            
            <div class="interactive-box">
                <p><strong>Drag each integer to its opposite:</strong></p>
                
                <div class="drag-drop-container">
                    <div class="drag-source">
                        <p><strong>Integers:</strong></p>
                        <div class="drag-item" draggable="true" data-match="+9">-9</div>
                        <div class="drag-item" draggable="true" data-match="-5">+5</div>
                        <div class="drag-item" draggable="true" data-match="0">0</div>
                        <div class="drag-item" draggable="true" data-match="+12">-12</div>
                        <div class="drag-item" draggable="true" data-match="-3">+3</div>
                    </div>
                    
                    <div class="drop-target" id="matchDropZone">
                        <p><strong>Drop Opposites Here:</strong></p>
                        <div id="matchResults" style="min-height: 100px;"></div>
                    </div>
                </div>
                
                <button class="answer-toggle" onclick="checkMatches()" style="margin-top: 15px;">Check Matching</button>
                <div id="matchFeedback" class="hidden-answer"></div>
            </div>
            
            <div class="subsection-title">Do You Know?</div>
            
            <div class="content-box">
                <p>The concept of negative numbers appeared in Chinese mathematics (200 BCE) and Indian mathematics (600 CE), but European mathematicians resisted them until the 17th century, calling them "fictitious" or "absurd"!</p>
            </div>
            
            <div class="subsection-title">Practice Exercises (Continued)</div>
            
            <div class="practice-box">
                <p><strong>Level 2:</strong> Application</p>
                <ol start="3" style="margin-left: 20px;">
                    <li style="margin: 10px 0;">In a quiz, +5 points are awarded for correct answers, -3 for wrong. If Rahul's score is -4, what does it mean?</li>
                </ol>
                
                <div style="margin-top: 15px;">
                    <textarea id="explanation" rows="3" style="width: 100%; padding: 10px; font-family: 'Open Sans', sans-serif;" placeholder="Write your explanation here..."></textarea>
                </div>
                
                <button class="answer-toggle" onclick="checkExplanation()" style="margin-top: 15px;">Check Answer</button>
                <div id="explanationResult" class="hidden-answer"></div>
                
                <p style="margin-top: 20px;"><strong>Level 3:</strong> Challenge</p>
                <ol start="4" style="margin-left: 20px;">
                    <li style="margin: 10px 0;">Find all integers x such that x + (-x) = 0. What property does this demonstrate?</li>
                </ol>
            </div>
            
            <div class="content-box">
                <p><strong>Key Insight:</strong> Every integer has exactly one opposite (additive inverse). The sum of an integer and its opposite is always 0.</p>
            </div>
            
            <div class="page-number">7</div>
        </div>
    </div>

    <!-- PAGE 8: Representing Integers on Number Line -->
    <div class="textbook-container" id="page8">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.2 Representing Integers on Number Line</div>
                    <div class="chapter-subtitle">Visualizing Integers</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>A <strong>number line</strong> helps visualize integers and understand their relationships.</p>
            </div>
            
            <div class="subsection-title">How to Draw a Number Line</div>
            
            <div class="step-box">
                <p><strong>Step 1:</strong> Draw a horizontal line.</p>
                <p><strong>Step 2:</strong> Mark a point <strong>0</strong> (origin) in the middle.</p>
                <p><strong>Step 3:</strong> Mark equal steps to the right for positive integers: 1, 2, 3, ...</p>
                <p><strong>Step 4:</strong> Mark equal steps to the left for negative integers: -1, -2, -3, ...</p>
            </div>
            
            <div class="subsection-title">Interactive Number Line</div>
            
            <div class="interactive-box">
                <p><strong>Explore:</strong> Drag the points to their correct positions on the number line.</p>
                
                <div class="number-line" id="numberLine">
                    <!-- Number line will be generated by JavaScript -->
                </div>
                
                <div style="display: flex; justify-content: center; gap: 20px; margin-top: 20px;">
                    <div style="text-align: center;">
                        <div class="number-point" id="pointA" style="background-color: var(--danger-color);" draggable="true"></div>
                        <div>Point A: <span id="pointAValue">-5</span></div>
                        <input type="range" min="-10" max="10" value="-5" class="slider" id="sliderA" oninput="updatePoint('A', this.value)" style="width: 150px;">
                    </div>
                    <div style="text-align: center;">
                        <div class="number-point" id="pointB" style="background-color: var(--primary-color);" draggable="true"></div>
                        <div>Point B: <span id="pointBValue">3</span></div>
                        <input type="range" min="-10" max="10" value="3" class="slider" id="sliderB" oninput="updatePoint('B', this.value)" style="width: 150px;">
                    </div>
                </div>
                
                <div id="comparisonResult" style="margin-top: 20px; padding: 15px; background-color: var(--secondary-bg); border-radius: 4px;">
                    <p>Which is greater? Point A or Point B? <button class="answer-toggle" onclick="checkComparison()" style="margin-left: 10px;">Check</button></p>
                </div>
            </div>
            
            <div class="subsection-title">Key Observations</div>
            
            <ul style="margin-left: 30px; margin-top: 10px;">
                <li style="margin: 8px 0;">Numbers <strong>increase</strong> as we move <strong>right</strong></li>
                <li style="margin: 8px 0;">Numbers <strong>decrease</strong> as we move <strong>left</strong></li>
                <li style="margin: 8px 0;">-3 is to the left of -1 → -3 < -1</li>
                <li style="margin: 8px 0;">2 is to the right of 0 → 2 > 0</li>
            </ul>
            
            <div class="subsection-title">Step-by-Step Example</div>
            
            <div class="step-box">
                <p><strong>Example:</strong> Locate -4 and +3 on the number line. Which is greater?</p>
                <p><strong>Step 1:</strong> Draw number line from -5 to 5.</p>
                <p><strong>Step 2:</strong> Mark -4 (4 steps left of 0).</p>
                <p><strong>Step 3:</strong> Mark +3 (3 steps right of 0).</p>
                <p><strong>Step 4:</strong> +3 is to the right of -4 → +3 > -4.</p>
            </div>
            
            <div class="video-container">
                <div class="video-icon">
                    <i class="fas fa-play-circle"></i>
                </div>
                <div>
                    <p><strong>Video: Number Line Visualization</strong></p>
                    <p>3-minute video showing movement on number line with real examples (elevator floors, temperature changes).</p>
                    <button class="answer-toggle" style="margin-top: 10px;">Play Video</button>
                </div>
            </div>
            
            <div class="exam-footer">
                <p><strong>This topic appeared in:</strong> CBSE Class 6, 2024, Q7 (Plotting integers); ICSE Class 7, 2023, Q3 (Comparing using number line); IMO Grade 6, 2022, Q1 (Ordering integers); JEE Main (Basic Math), 2021, Q2; NTSE Stage 2, 2020, Q5</p>
            </div>
            
            <div class="page-number">8</div>
        </div>
    </div>

    <!-- PAGE 9: Number Line Practice -->
    <div class="textbook-container" id="page9">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.2 Representing Integers (Cont.)</div>
                    <div class="chapter-subtitle">Practice with Number Lines</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="subsection-title">Few More Examples</div>
            
            <div class="example-box">
                <p><strong>Example 1:</strong> Which is greater: -2 or -5?</p>
                <p><strong>Solution:</strong> -2 is right of -5 → -2 > -5</p>
                
                <p><strong>Example 2:</strong> Order: -1, 3, -4, 0</p>
                <p><strong>Solution:</strong> -4 < -1 < 0 < 3</p>
            </div>
            
            <div class="subsection-title">Practice Exercises</div>
            
            <div class="practice-box">
                <p><strong>Level 1:</strong> Basic Skills</p>
                <ol style="margin-left: 20px;">
                    <li style="margin: 10px 0;">Mark these on a number line: -3, 0, 2, -1</li>
                    <li style="margin: 10px 0;">Which is farther from 0: -6 or +4?</li>
                </ol>
                
                <p><strong>Level 2:</strong> Application</p>
                <ol start="3" style="margin-left: 20px;">
                    <li style="margin: 10px 0;">True/False: Every negative integer is less than every positive integer.</li>
                    <li style="margin: 10px 0;">Write four integers between -8 and -3.</li>
                </ol>
                
                <p><strong>Level 3:</strong> Challenge</p>
                <ol start="5" style="margin-left: 20px;">
                    <li style="margin: 10px 0;">On a number line, if point A is at -5 and point B is 8 units to the right, where is B?</li>
                </ol>
                
                <div style="margin-top: 20px;">
                    <button class="answer-toggle" onclick="toggleAnswer('numberLineAnswers')">Show Answers</button>
                    <div id="numberLineAnswers" class="hidden-answer">
                        <p><strong>Answers:</strong></p>
                        <ol style="margin-left: 20px;">
                            <li style="margin: 5px 0;">Number line with points at -3, 0, 2, -1</li>
                            <li style="margin: 5px 0;">-6 (distance 6 > 4)</li>
                            <li style="margin: 5px 0;">True</li>
                            <li style="margin: 5px 0;">Possible: -7, -6, -5, -4</li>
                            <li style="margin: 5px 0;">+3</li>
                        </ol>
                    </div>
                </div>
            </div>
            
            <div class="subsection-title">Do You Know?</div>
            
            <div class="content-box">
                <p>Ancient Greeks didn't use number lines for negatives. The modern number line was popularized by John Wallis in the 17th century.</p>
            </div>
            
            <div class="subsection-title">Interactive Activity: Ordering Integers</div>
            
            <div class="interactive-box">
                <p><strong>Drag the integers to arrange them from least to greatest:</strong></p>
                
                <div style="display: flex; justify-content: space-between; padding: 20px; background-color: color-mix(in srgb, var(--primary-color) 5%, transparent); border-radius: 8px; margin: 20px 0;">
                    <div id="orderSource" style="display: flex; flex-wrap: wrap; gap: 10px; min-height: 80px; width: 100%;">
                        <div class="drag-item" draggable="true" data-value="-8">-8</div>
                        <div class="drag-item" draggable="true" data-value="2">2</div>
                        <div class="drag-item" draggable="true" data-value="-3">-3</div>
                        <div class="drag-item" draggable="true" data-value="0">0</div>
                        <div class="drag-item" draggable="true" data-value="5">5</div>
                        <div class="drag-item" draggable="true" data-value="-1">-1</div>
                    </div>
                </div>
                
                <p><strong>Arrange them here in ascending order:</strong></p>
                <div id="orderTarget" style="display: flex; flex-direction: row; gap: 5px; min-height: 120px; padding: 15px; border: 2px dashed var(--primary-color); border-radius: 8px; margin-top: 10px; position: relative;">
                    <!-- Ordered items will be placed here -->
                </div>
                
                <button class="answer-toggle" onclick="checkOrder()" style="margin-top: 15px;">Check Order</button>
                <div id="orderFeedback" class="hidden-answer"></div>
            </div>
            
            <div class="content-box">
                <p><strong>Key Insight:</strong> On a number line, any number to the right is always greater than any number to its left.</p>
            </div>
            
            <div class="page-number">9</div>
        </div>
    </div>

    <!-- PAGE 10: Absolute Value of Integers -->
    <div class="textbook-container" id="page10">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.3 Absolute Value of Integers</div>
                    <div class="chapter-subtitle">Understanding Distance from Zero</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>The <span class="key-term" data-definition="Numerical value of an integer without its sign">absolute value</span> of an integer is its numerical value <strong>without sign</strong>. It represents the <strong>distance from zero</strong> on the number line.</p>
                <div class="math-formula">
                    Notation: |a| = absolute value of a
                </div>
            </div>
            
            <div class="subsection-title">Daily Life Connection: Game Scores</div>
            
            <div class="real-life-problem">
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <i class="fas fa-gamepad problem-icon"></i>
                    <h4 style="margin: 0;">Video Game Leaderboard</h4>
                </div>
                <p>In a racing game, players can be ahead or behind the leader:</p>
                <div class="game-score">Rahul: -8 seconds (8 seconds behind leader)</div>
                <div class="game-score">Priya: +5 seconds (5 seconds ahead of leader)</div>
                <div class="game-score">Amit: -12 seconds (12 seconds behind leader)</div>
                <p><strong>Question:</strong> Who is farthest from the leader in terms of time difference?</p>
                <p><strong>Answer:</strong> We compare absolute values: | -8 | = 8, | +5 | = 5, | -12 | = 12. So Amit is farthest (12 seconds).</p>
            </div>
            
            <div class="subsection-title">Understanding Absolute Value</div>
            
            <table>
                <tr>
                    <th>Integer</th>
                    <th>Absolute Value</th>
                    <th>Reason</th>
                </tr>
                <tr>
                    <td>5</td>
                    <td>|5| = 5</td>
                    <td>5 units from 0</td>
                </tr>
                <tr>
                    <td>-5</td>
                    <td>|-5| = 5</td>
                    <td>5 units from 0</td>
                </tr>
                <tr>
                    <td>0</td>
                    <td>|0| = 0</td>
                    <td>0 units from 0</td>
                </tr>
                <tr>
                    <td>-23</td>
                    <td>|-23| = 23</td>
                    <td>23 units from 0</td>
                </tr>
            </table>
            
            <div class="subsection-title">Interactive: Absolute Value Explorer</div>
            
            <div class="interactive-box">
                <p><strong>Move the slider to see absolute values:</strong></p>
                <div class="slider-container">
                    <div class="slider-label">
                        <span>Integer: </span>
                        <span id="absValue">0</span>
                    </div>
                    <input type="range" min="-20" max="20" value="0" class="slider" id="absSlider" oninput="updateAbsValue()">
                    <div style="display: flex; justify-content: space-between; margin-top: 5px;">
                        <span>-20</span>
                        <span>0</span>
                        <span>20</span>
                    </div>
                </div>
                
                <div id="absResult" style="margin-top: 15px; padding: 15px; background-color: color-mix(in srgb, var(--primary-color) 10%, transparent); border-radius: 4px; text-align: center;">
                    <p><strong>Absolute Value:</strong> |0| = 0</p>
                    <p>Distance from zero: 0 units</p>
                </div>
            </div>
            
            <div class="subsection-title">Step-by-Step Examples</div>
            
            <div class="step-box">
                <p><strong>Example 1:</strong> Find |-23| + |15|</p>
                <p><strong>Step 1:</strong> |-23| = 23</p>
                <p><strong>Step 2:</strong> |15| = 15</p>
                <p><strong>Step 3:</strong> Add: 23 + 15 = 38</p>
                <p><strong>Answer:</strong> 38</p>
            </div>
            
            <div class="step-box">
                <p><strong>Example 2:</strong> Sam's bank account has -₹500 (overdraft). How much does he need to reach zero?</p>
                <p><strong>Step 1:</strong> Current balance = -500</p>
                <p><strong>Step 2:</strong> Distance from zero = |-500| = 500</p>
                <p><strong>Step 3:</strong> He needs ₹500 to reach zero balance</p>
                <p><strong>Answer:</strong> ₹500</p>
            </div>
            
            <div class="video-container">
                <div class="video-icon">
                    <i class="fas fa-play-circle"></i>
                </div>
                <div>
                    <p><strong>Video: Absolute Value in Daily Life</strong></p>
                    <p>5-minute video showing absolute value concepts with bank balances, game scores, and temperature differences.</p>
                    <button class="answer-toggle" onclick="playVideo('absVideo')">Play Video</button>
                </div>
            </div>
            
            <div class="exam-footer">
                <p><strong>This topic appeared in:</strong> CBSE Class 7, 2023, Q10 (Calculation); SAT Math, 2022, Q14 (Absolute value expressions); ICSE Class 6, 2021, Q5 (Basic concept); IMO Level 2, 2020, Q4; JEE Advanced (Basic), 2019, Q1; NTSE Stage 2, 2018, Q7</p>
            </div>
            
            <div class="page-number">10</div>
        </div>
    </div>

    <!-- PAGE 11: Absolute Value Practice -->
    <div class="textbook-container" id="page11">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.3 Absolute Value Practice</div>
                    <div class="chapter-subtitle">Real-World Applications</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="subsection-title">Practice Exercises (Real-Life Scenarios)</div>
            
            <div class="practice-box">
                <p><strong>Level 1: Daily Life Problems</strong></p>
                
                <div class="real-life-problem">
                    <p><strong>1. Temperature Difference:</strong> Delhi: 42°C, Shimla: 15°C. What's the temperature difference?</p>
                    <p><em>Hint: Difference = |42 - 15|</em></p>
                    <input type="text" id="tempDiff" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    <button class="answer-toggle" onclick="checkAnswer('tempDiff', '27')" style="margin-left: 10px;">Check</button>
                </div>
                
                <div class="real-life-problem">
                    <p><strong>2. Elevator Position:</strong> An elevator is at floor -2 (2 floors underground). How many floors must it rise to reach floor 5?</p>
                    <p><em>Hint: Calculate |5 - (-2)|</em></p>
                    <input type="text" id="elevatorProb" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    <button class="answer-toggle" onclick="checkAnswer('elevatorProb', '7')" style="margin-left: 10px;">Check</button>
                </div>
                
                <div class="real-life-problem">
                    <p><strong>3. Football Goal Difference:</strong> Team A: +8 goals, Team B: -3 goals. Which team has better goal difference in absolute terms?</p>
                    <select id="footballProb" style="padding: 5px; margin-left: 10px;">
                        <option value="">Select team</option>
                        <option value="A">Team A</option>
                        <option value="B">Team B</option>
                    </select>
                    <button class="answer-toggle" onclick="checkAnswer('footballProb', 'A')" style="margin-left: 10px;">Check</button>
                </div>
                
                <p><strong>Level 2: Calculations</strong></p>
                <ol start="4" style="margin-left: 20px;">
                    <li style="margin: 10px 0;">Find: |-13| + |6| = 
                        <input type="text" id="calc1" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                    <li style="margin: 10px 0;">Find: |-20| – |12| = 
                        <input type="text" id="calc2" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                    <li style="margin: 10px 0;">Find: |-8| + |-5| – |3| = 
                        <input type="text" id="calc3" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                </ol>
                
                <button class="answer-toggle" onclick="checkAllAbs()" style="margin-top: 15px;">Check All Answers</button>
                <div id="absPracticeResult" class="hidden-answer"></div>
            </div>
            
            <div class="subsection-title">Do You Know?</div>
            
            <div class="content-box">
                <p>Absolute value is also called "modulus" and is used in engineering, physics, and computer science to measure magnitude regardless of direction. For example, in GPS navigation, absolute value helps calculate shortest distances regardless of direction.</p>
            </div>
            
            <div class="subsection-title">Activity: Absolute Value Challenge</div>
            
            <div class="interactive-box">
                <p><strong>Match each real-life situation with the correct absolute value expression:</strong></p>
                
                <div class="drag-drop-container">
                    <div class="drag-source">
                        <p><strong>Situations:</strong></p>
                        <div class="drag-item" draggable="true" data-match="|5|">5°C above freezing</div>
                        <div class="drag-item" draggable="true" data-match="|-200|">₹200 debt</div>
                        <div class="drag-item" draggable="true" data-match="|15-(-10)|">Temperature change from -10°C to 15°C</div>
                        <div class="drag-item" draggable="true" data-match="|0-(-3)|">Moving from basement (floor -3) to ground floor</div>
                    </div>
                    
                    <div class="drop-target" id="absDropZone">
                        <p><strong>Match with Absolute Value:</strong></p>
                        <div id="absMatchResults" style="min-height: 100px;"></div>
                    </div>
                </div>
                
                <button class="answer-toggle" onclick="checkAbsMatches()" style="margin-top: 15px;">Check Matching</button>
                <div id="absMatchFeedback" class="hidden-answer"></div>
            </div>
            
            <div class="content-box">
                <p><strong>Key Insight:</strong> Absolute value always gives a non-negative result (≥ 0). It represents distance, and distance cannot be negative.</p>
            </div>
            
            <div class="page-number">11</div>
        </div>
    </div>

    <!-- PAGE 12: Addition of Integers -->
    <div class="textbook-container" id="page12">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.4 Addition of Integers</div>
                    <div class="chapter-subtitle">Combining Positive and Negative Numbers</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>Adding integers follows specific rules based on their signs. Understanding these rules helps in everyday situations like managing money, tracking scores, and measuring changes.</p>
            </div>
            
            <div class="subsection-title">Daily Life Connection: Pocket Money & Expenses</div>
            
            <div class="real-life-problem">
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <i class="fas fa-wallet problem-icon"></i>
                    <h4 style="margin: 0;">Weekly Pocket Money Tracker</h4>
                </div>
                <p>Rohan gets ₹200 weekly pocket money (+200). He spends:</p>
                <ul style="margin-left: 30px;">
                    <li>Monday: ₹50 on snacks (-50)</li>
                    <li>Wednesday: ₹30 on stationary (-30)</li>
                    <li>Friday: Earns ₹40 by helping neighbor (+40)</li>
                    <li>Saturday: ₹80 on movie ticket (-80)</li>
                </ul>
                <p><strong>Question:</strong> What's Rohan's balance at the end of the week?</p>
                <p><strong>Calculation:</strong> 200 + (-50) + (-30) + 40 + (-80) = ?</p>
                <button class="answer-toggle" onclick="toggleAnswer('pocketMoneyAnswer')">Show Solution</button>
                <div id="pocketMoneyAnswer" class="hidden-answer">
                    <p><strong>Solution:</strong></p>
                    <p>Step 1: 200 + (-50) = 150</p>
                    <p>Step 2: 150 + (-30) = 120</p>
                    <p>Step 3: 120 + 40 = 160</p>
                    <p>Step 4: 160 + (-80) = 80</p>
                    <p><strong>Answer:</strong> Rohan has ₹80 left at week's end.</p>
                </div>
            </div>
            
            <div class="subsection-title">Rules for Adding Integers</div>
            
            <table>
                <tr>
                    <th>Rule</th>
                    <th>Explanation</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td><strong>Same Signs</strong></td>
                    <td>Add absolute values, keep the sign</td>
                    <td>(-5) + (-4) = -9<br>(+7) + (+3) = +10</td>
                </tr>
                <tr>
                    <td><strong>Different Signs</strong></td>
                    <td>Subtract smaller absolute value from larger, keep sign of larger</td>
                    <td>(+9) + (-4) = +5<br>(-8) + (+3) = -5</td>
                </tr>
                <tr>
                    <td><strong>Adding Zero</strong></td>
                    <td>Any integer + 0 = same integer</td>
                    <td>(-6) + 0 = -6<br>0 + (+15) = +15</td>
                </tr>
                <tr>
                    <td><strong>Adding Opposites</strong></td>
                    <td>Any integer + its opposite = 0</td>
                    <td>7 + (-7) = 0<br>(-12) + 12 = 0</td>
                </tr>
            </table>
            
            <div class="subsection-title">Interactive: Integer Addition Simulator</div>
            
            <div class="interactive-box">
                <p><strong>Practice adding integers with this interactive tool:</strong></p>
                
                <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                    <div style="text-align: center;">
                        <div style="font-size: 32px; margin-bottom: 10px;" id="num1">+5</div>
                        <button class="answer-toggle" onclick="changeNumber('num1')">Change</button>
                    </div>
                    <div style="text-align: center; font-size: 32px; margin-top: 10px;">+</div>
                    <div style="text-align: center;">
                        <div style="font-size: 32px; margin-bottom: 10px;" id="num2">-3</div>
                        <button class="answer-toggle" onclick="changeNumber('num2')">Change</button>
                    </div>
                    <div style="text-align: center; font-size: 32px; margin-top: 10px;">=</div>
                    <div style="text-align: center;">
                        <input type="text" id="sumAnswer" placeholder="Your answer" style="width: 80px; padding: 10px; font-size: 20px; text-align: center;">
                        <button class="answer-toggle" onclick="checkSum()" style="margin-top: 10px;">Check</button>
                    </div>
                </div>
                
                <div id="sumFeedback" style="margin-top: 15px; padding: 15px; background-color: var(--secondary-bg); border-radius: 4px; text-align: center;">
                    <p>Try solving: (+5) + (-3) = ?</p>
                </div>
                
                <div style="text-align: center; margin-top: 20px;">
                    <button class="answer-toggle" onclick="showAdditionSteps()">Show Step-by-Step Solution</button>
                    <div id="additionSteps" class="hidden-answer"></div>
                </div>
            </div>
            
            <div class="video-container">
                <div class="video-icon">
                    <i class="fas fa-play-circle"></i>
                </div>
                <div>
                    <p><strong>Video: Adding Integers with Real Examples</strong></p>
                    <p>6-minute video showing addition rules with pocket money, temperature changes, and elevator movements.</p>
                    <button class="answer-toggle" onclick="playVideo('addVideo')">Play Video</button>
                </div>
            </div>
            
            <div class="exam-footer">
                <p><strong>This topic appeared in:</strong> CBSE Class 6, 2024, Q15 (Word problems); ICSE Class 7, 2023, Q8 (Addition rules); SAT, 2021, Q12 (Integer sums); IMO Level 1, 2020, Q6; JEE Main (Basic), 2019, Q3; NTSE Stage 1, 2018, Q9</p>
            </div>
            
            <div class="page-number">12</div>
        </div>
    </div>

    <!-- PAGE 13: Addition Practice -->
    <div class="textbook-container" id="page13">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.4 Addition Practice</div>
                    <div class="chapter-subtitle">Real-World Problem Solving</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="subsection-title">Practice Exercises (Student Life Scenarios)</div>
            
            <div class="practice-box">
                <p><strong>Level 1: Daily Student Life</strong></p>
                
                <div class="real-life-problem">
                    <p><strong>1. Quiz Scores:</strong> In a science quiz, you get +5 for correct, -2 for wrong, 0 for not attempted. Your scores: Q1: +5, Q2: -2, Q3: +5, Q4: 0, Q5: -2. What's your total?</p>
                    <input type="text" id="quizScore" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    <button class="answer-toggle" onclick="checkAnswer('quizScore', '6')" style="margin-left: 10px;">Check</button>
                </div>
                
                <div class="real-life-problem">
                    <p><strong>2. Temperature Change:</strong> Morning temp: 15°C. It rises 8°C by noon, then falls 12°C by evening. What's evening temp?</p>
                    <input type="text" id="tempChange" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    <button class="answer-toggle" onclick="checkAnswer('tempChange', '11')" style="margin-left: 10px;">Check</button>
                </div>
                
                <div class="real-life-problem">
                    <p><strong>3. Elevator Journey:</strong> Starts at floor 3, goes up 5 floors, down 7 floors, up 2 floors. Where does it end?</p>
                    <input type="text" id="elevatorJourney" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    <button class="answer-toggle" onclick="checkAnswer('elevatorJourney', '3')" style="margin-left: 10px;">Check</button>
                </div>
                
                <p><strong>Level 2: Calculations</strong></p>
                <ol start="4" style="margin-left: 20px;">
                    <li style="margin: 10px 0;">(-12) + (+7) = 
                        <input type="text" id="add1" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                    <li style="margin: 10px 0;">(+15) + (-20) = 
                        <input type="text" id="add2" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                    <li style="margin: 10px 0;">(-8) + (-9) = 
                        <input type="text" id="add3" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                    <li style="margin: 10px 0;">(+25) + (-25) = 
                        <input type="text" id="add4" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                </ol>
                
                <button class="answer-toggle" onclick="checkAllAdd()" style="margin-top: 15px;">Check All Answers</button>
                <div id="addPracticeResult" class="hidden-answer"></div>
            </div>
            
            <div class="subsection-title">Activity: Shopping Cart Addition</div>
            
            <div class="interactive-box">
                <p><strong>Calculate your shopping cart total:</strong></p>
                
                <div class="shopping-cart">
                    <p>Your Budget: ₹500</p>
                </div>
                
                <table>
                    <tr>
                        <th>Item</th>
                        <th>Price</th>
                        <th>Add to Cart</th>
                    </tr>
                    <tr>
                        <td>Notebook</td>
                        <td>₹50</td>
                        <td><button class="answer-toggle" onclick="addToCart(50)">Add (+50)</button></td>
                    </tr>
                    <tr>
                        <td>Pen</td>
                        <td>₹20</td>
                        <td><button class="answer-toggle" onclick="addToCart(20)">Add (+20)</button></td>
                    </tr>
                    <tr>
                        <td>Return defective calculator (refund)</td>
                        <td>₹150</td>
                        <td><button class="answer-toggle" onclick="addToCart(-150)">Refund (-150)</button></td>
                    </tr>
                    <tr>
                        <td>Lunch</td>
                        <td>₹80</td>
                        <td><button class="answer-toggle" onclick="addToCart(80)">Add (+80)</button></td>
                    </tr>
                    <tr>
                        <td>Bus pass</td>
                        <td>₹100</td>
                        <td><button class="answer-toggle" onclick="addToCart(100)">Add (+100)</button></td>
                    </tr>
                </table>
                
                <div style="margin-top: 20px; padding: 15px; background-color: var(--secondary-bg); border-radius: 4px;">
                    <p><strong>Cart Total:</strong> ₹<span id="cartTotal">0</span></p>
                    <p><strong>Remaining Budget:</strong> ₹<span id="remainingBudget">500</span></p>
                    <p id="budgetMessage"></p>
                    <button class="answer-toggle" onclick="resetCart()" style="margin-top: 10px;">Reset Cart</button>
                </div>
            </div>
            
            <div class="content-box">
                <p><strong>Pro Tip:</strong> When adding integers with different signs, think of it as gains and losses. Positive numbers add to your total, negative numbers subtract from it.</p>
            </div>
            
            <div class="page-number">13</div>
        </div>
    </div>

    <!-- PAGE 14: Subtraction of Integers -->
    <div class="textbook-container" id="page14">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.5 Subtraction of Integers</div>
                    <div class="chapter-subtitle">Finding Differences in Real Situations</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>Subtracting an integer is the same as <strong>adding its opposite</strong>. This simple rule makes subtraction problems much easier to solve!</p>
                <div class="math-formula">
                    a - b = a + (-b)
                </div>
            </div>
            
            <div class="subsection-title">Daily Life Connection: Temperature Changes</div>
            
            <div class="real-life-problem">
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <i class="fas fa-thermometer-half problem-icon"></i>
                    <h4 style="margin: 0;">Weather Report</h4>
                </div>
                <p>Monday morning: 8°C<br>
                Monday evening: -3°C<br>
                <strong>Question:</strong> How much did the temperature drop?</p>
                
                <div class="temperature-display">
                    Temperature drop = 8°C - (-3°C) = ?
                </div>
                
                <button class="answer-toggle" onclick="toggleAnswer('tempDropAnswer')">Show Solution</button>
                <div id="tempDropAnswer" class="hidden-answer">
                    <p><strong>Solution:</strong></p>
                    <p>Step 1: 8 - (-3) = 8 + (+3) [Change subtraction to addition of opposite]</p>
                    <p>Step 2: 8 + 3 = 11</p>
                    <p><strong>Answer:</strong> The temperature dropped 11°C.</p>
                    <p><em>Wait, that seems strange! Actually, when we go from 8°C to -3°C, the temperature drops by 11°C. The calculation 8 - (-3) = 11 gives us the difference between the temperatures.</em></p>
                </div>
            </div>
            
            <div class="subsection-title">Rules for Subtracting Integers</div>
            
            <table>
                <tr>
                    <th>Rule</th>
                    <th>Explanation</th>
                    <th>Example</th>
                </tr>
                <tr>
                    <td><strong>Change to Addition</strong></td>
                    <td>Change subtraction to addition of opposite</td>
                    <td>5 - 8 = 5 + (-8) = -3</td>
                </tr>
                <tr>
                    <td><strong>Subtracting Negative</strong></td>
                    <td>Subtracting negative = adding positive</td>
                    <td>7 - (-4) = 7 + 4 = 11</td>
                </tr>
                <tr>
                    <td><strong>Subtracting from Negative</strong></td>
                    <td>Follow same rule</td>
                    <td>-6 - 5 = -6 + (-5) = -11</td>
                </tr>
                <tr>
                    <td><strong>Subtracting Zero</strong></td>
                    <td>Any integer - 0 = same integer</td>
                    <td>(-9) - 0 = -9<br>15 - 0 = 15</td>
                </tr>
            </table>
            
            <div class="subsection-title">Interactive: Subtraction Game</div>
            
            <div class="interactive-box">
                <p><strong>Solve these real-life subtraction problems:</strong></p>
                
                <div style="margin: 20px 0;">
                    <div class="real-life-problem">
                        <p><strong>Problem 1:</strong> You have ₹300 in your wallet. You owe your friend ₹150. After paying, what's your balance?</p>
                        <p>Calculation: 300 - 150 = 
                            <input type="text" id="moneyProb" style="width: 60px; padding: 5px; margin-left: 10px;">
                            <button class="answer-toggle" onclick="checkAnswer('moneyProb', '150')" style="margin-left: 10px;">Check</button>
                        </p>
                    </div>
                    
                    <div class="real-life-problem">
                        <p><strong>Problem 2:</strong> Mount Everest: 8848m, Dead Sea: -430m. What's the height difference?</p>
                        <p>Calculation: 8848 - (-430) = 
                            <input type="text" id="heightProb" style="width: 80px; padding: 5px; margin-left: 10px;">
                            <button class="answer-toggle" onclick="checkAnswer('heightProb', '9278')" style="margin-left: 10px;">Check</button>
                        </p>
                    </div>
                    
                    <div class="real-life-problem">
                        <p><strong>Problem 3:</strong> Score in game: -5 points. You gain 12 points. What's your new score?</p>
                        <p>Calculation: (-5) + 12 = 
                            <input type="text" id="gameProb" style="width: 60px; padding: 5px; margin-left: 10px;">
                            <button class="answer-toggle" onclick="checkAnswer('gameProb', '7')" style="margin-left: 10px;">Check</button>
                        </p>
                    </div>
                </div>
                
                <div id="subtractionFeedback" style="margin-top: 15px; padding: 15px; background-color: var(--secondary-bg); border-radius: 4px; text-align: center;">
                    <p>Score: <span id="subScore">0</span>/3 correct</p>
                    <button class="answer-toggle" onclick="resetSubGame()">Reset Game</button>
                </div>
            </div>
            
            <div class="video-container">
                <div class="video-icon">
                    <i class="fas fa-play-circle"></i>
                </div>
                <div>
                    <p><strong>Video: Subtraction as Adding the Opposite</strong></p>
                    <p>5-minute animation showing why a - b = a + (-b) with bank transactions and temperature changes.</p>
                    <button class="answer-toggle" onclick="playVideo('subVideo')">Play Video</button>
                </div>
            </div>
            
            <div class="exam-footer">
                <p><strong>This topic appeared in:</strong> CBSE Class 7, 2023, Q12 (Subtraction rules); ICSE Class 6, 2022, Q9 (Word problems); IMO, 2021, Q4 (Advanced subtraction); JEE Main (Basic), 2020, Q5; NTSE Stage 2, 2019, Q8</p>
            </div>
            
            <div class="page-number">14</div>
        </div>
    </div>

    <!-- PAGE 15: Subtraction Practice -->
    <div class="textbook-container" id="page15">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.5 Subtraction Practice</div>
                    <div class="chapter-subtitle">Applying Subtraction in Daily Life</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="subsection-title">Practice Exercises (Student Scenarios)</div>
            
            <div class="practice-box">
                <p><strong>Level 1: School Life Problems</strong></p>
                
                <div class="real-life-problem">
                    <p><strong>1. Test Score Improvement:</strong> First test: 65/100, Second test: 82/100. How much did you improve?</p>
                    <input type="text" id="testImprove" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    <button class="answer-toggle" onclick="checkAnswer('testImprove', '17')" style="margin-left: 10px;">Check</button>
                </div>
                
                <div class="real-life-problem">
                    <p><strong>2. Bank Balance:</strong> Starting balance: ₹500. Withdraw ₹200, then deposit ₹300. What's final balance?</p>
                    <input type="text" id="bankBalance" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    <button class="answer-toggle" onclick="checkAnswer('bankBalance', '600')" style="margin-left: 10px;">Check</button>
                </div>
                
                <div class="real-life-problem">
                    <p><strong>3. Football Match:</strong> Your team is losing 0-2. You score 3 goals. What's the final score difference?</p>
                    <input type="text" id="footballScore" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    <button class="answer-toggle" onclick="checkAnswer('footballScore', '+1')" style="margin-left: 10px;">Check</button>
                </div>
                
                <p><strong>Level 2: Calculations</strong></p>
                <ol start="4" style="margin-left: 20px;">
                    <li style="margin: 10px 0;">10 - 15 = 
                        <input type="text" id="sub1" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                    <li style="margin: 10px 0;">(-6) - (-2) = 
                        <input type="text" id="sub2" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                    <li style="margin: 10px 0;">0 - (-7) = 
                        <input type="text" id="sub3" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                    <li style="margin: 10px 0;">(-25) - (+10) = 
                        <input type="text" id="sub4" style="width: 60px; padding: 5px; margin-left: 10px;">
                    </li>
                </ol>
                
                <button class="answer-toggle" onclick="checkAllSub()" style="margin-top: 15px;">Check All Answers</button>
                <div id="subPracticeResult" class="hidden-answer"></div>
            </div>
            
            <div class="subsection-title">Activity: Temperature Change Calculator</div>
            
            <div class="interactive-box">
                <p><strong>Calculate temperature changes throughout the day:</strong></p>
                
                <table>
                    <tr>
                        <th>Time</th>
                        <th>Temperature</th>
                        <th>Change from previous</th>
                    </tr>
                    <tr>
                        <td>6 AM</td>
                        <td>8°C</td>
                        <td>Starting point</td>
                    </tr>
                    <tr>
                        <td>10 AM</td>
                        <td><input type="text" id="temp10am" value="15" style="width: 50px; padding: 5px;">°C</td>
                        <td id="change1">Calculating...</td>
                    </tr>
                    <tr>
                        <td>2 PM</td>
                        <td><input type="text" id="temp2pm" value="18" style="width: 50px; padding: 5px;">°C</td>
                        <td id="change2">Calculating...</td>
                    </tr>
                    <tr>
                        <td>6 PM</td>
                        <td><input type="text" id="temp6pm" value="12" style="width: 50px; padding: 5px;">°C</td>
                        <td id="change3">Calculating...</td>
                    </tr>
                    <tr>
                        <td>10 PM</td>
                        <td><input type="text" id="temp10pm" value="5" style="width: 50px; padding: 5px;">°C</td>
                        <td id="change4">Calculating...</td>
                    </tr>
                </table>
                
                <button class="answer-toggle" onclick="calculateTempChanges()" style="margin-top: 15px;">Calculate Changes</button>
                
                <div id="tempCalcResult" style="margin-top: 15px; padding: 15px; background-color: var(--secondary-bg); border-radius: 4px;">
                    <p><strong>Total temperature change during day:</strong> <span id="totalChange">0</span>°C</p>
                    <p><strong>Highest temperature:</strong> <span id="highestTemp">0</span>°C</p>
                    <p><strong>Lowest temperature:</strong> <span id="lowestTemp">0</span>°C</p>
                </div>
            </div>
            
            <div class="content-box">
                <p><strong>Remember:</strong> Subtraction of integers often appears in real life as finding differences: temperature changes, score improvements, bank balance changes, etc. Always ask: "What's the difference between these two values?"</p>
            </div>
            
            <div class="page-number">15</div>
        </div>
    </div>

    <!-- PAGE 16: Properties of Integers -->
    <div class="textbook-container" id="page16">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.6 Properties of Integers</div>
                    <div class="chapter-subtitle">Understanding How Integers Behave</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>Integers follow specific properties that make calculations predictable and consistent. Understanding these properties helps solve problems faster and with more confidence.</p>
            </div>
            
            <div class="subsection-title">Daily Life Connection: Shopping Receipts</div>
            
            <div class="real-life-problem">
                <div style="display: flex; align-items: center; margin-bottom: 15px;">
                    <i class="fas fa-shopping-bag problem-icon"></i>
                    <h4 style="margin: 0;">Grocery Shopping</h4>
                </div>
                <p>You buy: Apples (₹50), Bread (₹30), Milk (₹40)<br>
                Does it matter in which order you add them to the bill?<br>
                Total: 50 + 30 + 40 = 120<br>
                Also: 30 + 40 + 50 = 120<br>
                Also: 40 + 50 + 30 = 120<br>
                <strong>Observation:</strong> The total is always ₹120 regardless of order!</p>
                <p>This demonstrates the <strong>Commutative Property</strong> of addition.</p>
            </div>
            
            <div class="subsection-title">Properties of Integer Operations</div>
            
            <table>
                <tr>
                    <th>Property</th>
                    <th>Addition</th>
                    <th>Subtraction</th>
                </tr>
                <tr>
                    <td><strong>Closure</strong><br>(Result is always an integer)</td>
                    <td>✓ Example: 5 + (-3) = 2</td>
                    <td>✓ Example: 8 - 12 = -4</td>
                </tr>
                <tr>
                    <td><strong>Commutative</strong><br>(Order doesn't matter)</td>
                    <td>✓ 7 + (-4) = (-4) + 7</td>
                    <td>✗ 5 - 3 ≠ 3 - 5</td>
                </tr>
                <tr>
                    <td><strong>Associative</strong><br>(Grouping doesn't matter)</td>
                    <td>✓ (2 + 3) + (-5) = 2 + [3 + (-5)]</td>
                    <td>✗ (8 - 4) - 2 ≠ 8 - (4 - 2)</td>
                </tr>
                <tr>
                    <td><strong>Additive Identity</strong><br>(Adding zero gives same number)</td>
                    <td>✓ (-9) + 0 = -9</td>
                    <td>✓ 15 - 0 = 15</td>
                </tr>
                <tr>
                    <td><strong>Additive Inverse</strong><br>(Number + its opposite = 0)</td>
                    <td>✓ 12 + (-12) = 0</td>
                    <td>N/A</td>
                </tr>
            </table>
            
            <div class="subsection-title">Interactive: Property Tester</div>
            
            <div class="interactive-box">
                <p><strong>Test each property with your own examples:</strong></p>
                
                <div style="margin: 20px 0;">
                    <div class="real-life-problem">
                        <p><strong>Commutative Property Test:</strong></p>
                        <p>Enter two integers: 
                            <input type="text" id="commA" value="5" style="width: 50px; padding: 5px;"> and 
                            <input type="text" id="commB" value="-3" style="width: 50px; padding: 5px;">
                        </p>
                        <p id="commResult" style="margin-top: 10px;">5 + (-3) = 2 and (-3) + 5 = 2 ✓</p>
                        <button class="answer-toggle" onclick="testCommutative()">Test Commutative</button>
                    </div>
                    
                    <div class="real-life-problem">
                        <p><strong>Associative Property Test:</strong></p>
                        <p>Enter three integers: 
                            <input type="text" id="assocA" value="4" style="width: 50px; padding: 5px;">, 
                            <input type="text" id="assocB" value="-2" style="width: 50px; padding: 5px;">, 
                            <input type="text" id="assocC" value="6" style="width: 50px; padding: 5px;">
                        </p>
                        <p id="assocResult" style="margin-top: 10px;">(4 + (-2)) + 6 = 8 and 4 + ((-2) + 6) = 8 ✓</p>
                        <button class="answer-toggle" onclick="testAssociative()">Test Associative</button>
                    </div>
                    
                    <div class="real-life-problem">
                        <p><strong>Additive Inverse Test:</strong></p>
                        <p>Enter an integer: 
                            <input type="text" id="invNum" value="7" style="width: 50px; padding: 5px;">
                        </p>
                        <p id="invResult" style="margin-top: 10px;">7 + (-7) = 0 ✓</p>
                        <button class="answer-toggle" onclick="testInverse()">Test Additive Inverse</button>
                    </div>
                </div>
            </div>
            
            <div class="video-container">
                <div class="video-icon">
                    <i class="fas fa-play-circle"></i>
                </div>
                <div>
                    <p><strong>Video: Integer Properties Explained</strong></p>
                    <p>7-minute video demonstrating each property with shopping, banking, and gaming examples.</p>
                    <button class="answer-toggle" onclick="playVideo('propVideo')">Play Video</button>
                </div>
            </div>
            
            <div class="exam-footer">
                <p><strong>This topic appeared in:</strong> CBSE Class 7, 2024, Q18 (Property identification); ICSE Class 6, 2023, Q11 (True/False on properties); NTSE Stage 1, 2022, Q3 (Advanced property application); IMO Level 2, 2021, Q5; JEE Main (Basic), 2020, Q2</p>
            </div>
            
            <div class="page-number">16</div>
        </div>
    </div>

    <!-- PAGE 17: Properties Practice & Chapter Summary -->
    <div class="textbook-container" id="page17">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">4.6 Properties Practice & Summary</div>
                    <div class="chapter-subtitle">Consolidating Your Learning</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="subsection-title">Practice Exercises (Property Identification)</div>
            
            <div class="practice-box">
                <p><strong>Level 1: Identify the Property</strong></p>
                
                <div class="real-life-problem">
                    <p><strong>1.</strong> 15 + (-15) = 0 demonstrates which property?</p>
                    <select id="prop1" style="padding: 5px; width: 200px;">
                        <option value="">Select property</option>
                        <option value="commutative">Commutative Property</option>
                        <option value="associative">Associative Property</option>
                        <option value="inverse">Additive Inverse</option>
                        <option value="identity">Additive Identity</option>
                    </select>
                    <button class="answer-toggle" onclick="checkAnswer('prop1', 'inverse')" style="margin-left: 10px;">Check</button>
                </div>
                
                <div class="real-life-problem">
                    <p><strong>2.</strong> (-8) + 3 = 3 + (-8) demonstrates which property?</p>
                    <select id="prop2" style="padding: 5px; width: 200px;">
                        <option value="">Select property</option>
                        <option value="commutative">Commutative Property</option>
                        <option value="associative">Associative Property</option>
                        <option value="inverse">Additive Inverse</option>
                        <option value="identity">Additive Identity</option>
                    </select>
                    <button class="answer-toggle" onclick="checkAnswer('prop2', 'commutative')" style="margin-left: 10px;">Check</button>
                </div>
                
                <div class="real-life-problem">
                    <p><strong>3.</strong> 0 + (-23) = -23 demonstrates which property?</p>
                    <select id="prop3" style="padding: 5px; width: 200px;">
                        <option value="">Select property</option>
                        <option value="commutative">Commutative Property</option>
                        <option value="associative">Associative Property</option>
                        <option value="inverse">Additive Inverse</option>
                        <option value="identity">Additive Identity</option>
                    </select>
                    <button class="answer-toggle" onclick="checkAnswer('prop3', 'identity')" style="margin-left: 10px;">Check</button>
                </div>
                
                <p><strong>Level 2: True/False</strong></p>
                <ol start="4" style="margin-left: 20px;">
                    <li style="margin: 10px 0;">Subtraction of integers is commutative. 
                        <select id="tf1" style="margin-left: 10px; padding: 5px;">
                            <option value="">Select</option>
                            <option value="true">True</option>
                            <option value="false">False</option>
                        </select>
                    </li>
                    <li style="margin: 10px 0;">The sum of two integers is always an integer.
                        <select id="tf2" style="margin-left: 10px; padding: 5px;">
                            <option value="">Select</option>
                            <option value="true">True</option>
                            <option value="false">False</option>
                        </select>
                    </li>
                    <li style="margin: 10px 0;">For integers a, b, c: (a - b) - c = a - (b - c)
                        <select id="tf3" style="margin-left: 10px; padding: 5px;">
                            <option value="">Select</option>
                            <option value="true">True</option>
                            <option value="false">False</option>
                        </select>
                    </li>
                </ol>
                
                <button class="answer-toggle" onclick="checkAllProps()" style="margin-top: 15px;">Check All Answers</button>
                <div id="propPracticeResult" class="hidden-answer"></div>
            </div>
            
            <div class="subsection-title">Chapter 1: Integers - Visual Summary</div>
            
            <div class="interactive-box">
                <p><strong>Create Your Own Cheat Sheet:</strong> Drag important concepts to your summary sheet.</p>
                
                <div style="display: flex; justify-content: space-between; margin: 20px 0;">
                    <div class="drag-source" style="width: 50%;">
                        <p><strong>Key Concepts:</strong></p>
                        <div class="drag-item" draggable="true" data-concept="integers">Integers: {..., -2, -1, 0, 1, 2, ...}</div>
                        <div class="drag-item" draggable="true" data-concept="opposites">Opposites: a + (-a) = 0</div>
                        <div class="drag-item" draggable="true" data-concept="absolute">|a| = distance from 0</div>
                        <div class="drag-item" draggable="true" data-concept="addition">Addition rules</div>
                        <div class="drag-item" draggable="true" data-concept="subtraction">a - b = a + (-b)</div>
                        <div class="drag-item" draggable="true" data-concept="properties">Properties of operations</div>
                    </div>
                    
                    <div class="drop-target" style="width: 45%;">
                        <p><strong>My Summary Sheet:</strong></p>
                        <div id="summarySheet" style="min-height: 200px; padding: 15px; border: 2px dashed var(--primary-color);">
                            <!-- Concepts will be added here -->
                        </div>
                    </div>
                </div>
                
                <button class="answer-toggle" onclick="saveSummary()" style="margin-top: 15px;">Save Summary</button>
                <button class="answer-toggle" onclick="printSummary()" style="margin-top: 15px; margin-left: 10px;">Print Summary</button>
            </div>
            
            <div class="content-box">
                <p><strong>Common Misconceptions to Avoid:</strong></p>
                <ol style="margin-left: 20px;">
                    <li>Thinking -5 is greater than -2 (actually -5 < -2)</li>
                    <li>Forgetting that subtracting a negative = adding a positive</li>
                    <li>Believing subtraction is commutative (it's not!)</li>
                    <li>Confusing absolute value with the number itself</li>
                </ol>
            </div>
            
            <div class="page-number">17</div>
        </div>
    </div>

    <!-- PAGE 18: Chapter Summary & Checklist -->
    <div class="textbook-container" id="page18">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">5. Chapter Summary</div>
                    <div class="chapter-subtitle">Key Takeaways from Integers</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>Congratulations! You've completed the chapter on Integers. Let's review what you've learned.</p>
            </div>
            
            <div class="subsection-title">Infographic Summary</div>
            
            <div style="text-align: center; margin: 25px 0;">
                <div style="background-color: var(--primary-color); color: white; padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <h4 style="margin: 0;">INTEGERS = {..., -3, -2, -1, 0, 1, 2, 3, ...}</h4>
                </div>
                
                <div style="display: flex; justify-content: space-around; flex-wrap: wrap; margin: 20px 0;">
                    <div style="background-color: var(--secondary-bg); padding: 15px; border-radius: 8px; width: 45%; margin-bottom: 15px;">
                        <h4>Number Line</h4>
                        <p>Right → Greater<br>Left → Smaller</p>
                    </div>
                    <div style="background-color: var(--secondary-bg); padding: 15px; border-radius: 8px; width: 45%; margin-bottom: 15px;">
                        <h4>Absolute Value</h4>
                        <p>|a| = distance from 0<br>Always ≥ 0</p>
                    </div>
                    <div style="background-color: var(--secondary-bg); padding: 15px; border-radius: 8px; width: 45%; margin-bottom: 15px;">
                        <h4>Addition</h4>
                        <p>Same signs: add, keep sign<br>Different signs: subtract, keep sign of larger</p>
                    </div>
                    <div style="background-color: var(--secondary-bg); padding: 15px; border-radius: 8px; width: 45%; margin-bottom: 15px;">
                        <h4>Subtraction</h4>
                        <p>a - b = a + (-b)<br>Subtracting negative = adding positive</p>
                    </div>
                </div>
            </div>
            
            <div class="subsection-title">Real-World Applications</div>
            
            <div class="real-life-problem">
                <p><strong>Where you'll use integers:</strong></p>
                <ul style="margin-left: 30px; margin-top: 10px;">
                    <li><strong>Temperature:</strong> Above/below freezing</li>
                    <li><strong>Finance:</strong> Bank balances, profits/losses</li>
                    <li><strong>Sports:</strong> Scores above/below par, goal differences</li>
                    <li><strong>Geography:</strong> Elevations above/below sea level</li>
                    <li><strong>Gaming:</strong> Points, levels, scores</li>
                    <li><strong>Science:</strong> Positive/negative charges, directions</li>
                </ul>
            </div>
            
            <div class="subsection-title">Downloadable Resources</div>
            
            <div class="interactive-box">
                <p><strong>Click to download:</strong></p>
                <div style="display: flex; flex-wrap: wrap; gap: 10px; margin-top: 15px;">
                    <button class="answer-toggle" onclick="downloadResource('numberLine')">Printable Number Lines</button>
                    <button class="answer-toggle" onclick="downloadResource('rules')">Integer Rules Summary</button>
                    <button class="answer-toggle" onclick="downloadResource('practice')">Practice Worksheet</button>
                    <button class="answer-toggle" onclick="downloadResource('mindmap')">Chapter Mind Map</button>
                </div>
            </div>
            
            <div class="subsection-title">Common Mistakes & How to Avoid Them</div>
            
            <table>
                <tr>
                    <th>Mistake</th>
                    <th>Correct Approach</th>
                </tr>
                <tr>
                    <td>Thinking -8 > -3</td>
                    <td>On number line, -8 is left of -3, so -8 < -3</td>
                </tr>
                <tr>
                    <td>Calculating 5 - (-2) = 3</td>
                    <td>5 - (-2) = 5 + 2 = 7 (subtract negative = add positive)</td>
                </tr>
                <tr>
                    <td>Solving |-5| = -5</td>
                    <td>Absolute value is always non-negative: |-5| = 5</td>
                </tr>
                <tr>
                    <td>Thinking subtraction is associative</td>
                    <td>Test with example: (8-4)-2=2 but 8-(4-2)=6, so not associative</td>
                </tr>
            </table>
            
            <div class="exam-footer">
                <p><strong>Pro Tip:</strong> When stuck, draw a number line! Visualizing integers often makes problems easier to solve.</p>
            </div>
            
            <div class="page-number">18</div>
        </div>
    </div>

    <!-- PAGE 19: Self-Assessment Checklist -->
    <div class="textbook-container" id="page19">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">6. Self-Assessment Checklist</div>
                    <div class="chapter-subtitle">Track Your Learning Progress</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>Rate your understanding of each learning objective. Be honest with yourself - this helps identify areas needing review.</p>
            </div>
            
            <div class="subsection-title">Learning Objectives Assessment</div>
            
            <div class="checklist">
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <div style="flex-grow: 1;">
                        <p><strong>Define integers and identify positive/negative integers</strong></p>
                        <p>Rate your understanding:</p>
                        <div style="display: flex; gap: 5px; margin-top: 5px;">
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(1, 1)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(1, 2)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(1, 3)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(1, 4)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(1, 5)">★</span>
                        </div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <div style="flex-grow: 1;">
                        <p><strong>Represent integers on a number line accurately</strong></p>
                        <p>Rate your understanding:</p>
                        <div style="display: flex; gap: 5px; margin-top: 5px;">
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(2, 1)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(2, 2)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(2, 3)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(2, 4)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(2, 5)">★</span>
                        </div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <div style="flex-grow: 1;">
                        <p><strong>Compare and order integers using number line and rules</strong></p>
                        <p>Rate your understanding:</p>
                        <div style="display: flex; gap: 5px; margin-top: 5px;">
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(3, 1)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(3, 2)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(3, 3)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(3, 4)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(3, 5)">★</span>
                        </div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <div style="flex-grow: 1;">
                        <p><strong>Find the absolute value of any integer</strong></p>
                        <p>Rate your understanding:</p>
                        <div style="display: flex; gap: 5px; margin-top: 5px;">
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(4, 1)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(4, 2)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(4, 3)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(4, 4)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(4, 5)">★</span>
                        </div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <div style="flex-grow: 1;">
                        <p><strong>Add integers using rules and number line visualization</strong></p>
                        <p>Rate your understanding:</p>
                        <div style="display: flex; gap: 5px; margin-top: 5px;">
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(5, 1)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(5, 2)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(5, 3)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(5, 4)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(5, 5)">★</span>
                        </div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <div style="flex-grow: 1;">
                        <p><strong>Subtract integers by converting to addition of opposites</strong></p>
                        <p>Rate your understanding:</p>
                        <div style="display: flex; gap: 5px; margin-top: 5px;">
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(6, 1)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(6, 2)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(6, 3)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(6, 4)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(6, 5)">★</span>
                        </div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <div style="flex-grow: 1;">
                        <p><strong>Understand and apply properties of integer operations</strong></p>
                        <p>Rate your understanding:</p>
                        <div style="display: flex; gap: 5px; margin-top: 5px;">
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(7, 1)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(7, 2)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(7, 3)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(7, 4)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(7, 5)">★</span>
                        </div>
                    </div>
                </div>
                
                <div class="checklist-item">
                    <div class="checklist-box" onclick="toggleCheck(this)"></div>
                    <div style="flex-grow: 1;">
                        <p><strong>Solve real-world problems using integers</strong></p>
                        <p>Rate your understanding:</p>
                        <div style="display: flex; gap: 5px; margin-top: 5px;">
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(8, 1)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(8, 2)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(8, 3)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(8, 4)">★</span>
                            <span style="cursor: pointer; color: var(--warning-color);" onclick="rateObjective(8, 5)">★</span>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="subsection-title">Based on Your Ratings</div>
            
            <div id="reviewSuggestions" style="margin: 20px 0; padding: 20px; background-color: color-mix(in srgb, var(--primary-color) 10%, transparent); border-radius: 8px;">
                <p><strong>Review Suggestions:</strong> Complete your self-assessment above to get personalized review suggestions.</p>
            </div>
            
            <div class="subsection-title">Printable Progress Tracker</div>
            
            <div class="interactive-box">
                <p><strong>Print this checklist to track your progress:</strong></p>
                <div style="border: 1px solid var(--primary-color); padding: 20px; border-radius: 8px;">
                    <h4 style="text-align: center; margin-bottom: 15px;">Chapter 1: Integers Progress Tracker</h4>
                    <table>
                        <tr>
                            <th>Date</th>
                            <th>Topic</th>
                            <th>Completed</th>
                            <th>Score/5</th>
                        </tr>
                        <tr>
                            <td>________</td>
                            <td>Introduction to Integers</td>
                            <td>□</td>
                            <td>___/5</td>
                        </tr>
                        <tr>
                            <td>________</td>
                            <td>Number Line Representation</td>
                            <td>□</td>
                            <td>___/5</td>
                        </tr>
                        <tr>
                            <td>________</td>
                            <td>Absolute Value</td>
                            <td>□</td>
                            <td>___/5</td>
                        </tr>
                        <tr>
                            <td>________</td>
                            <td>Addition of Integers</td>
                            <td>□</td>
                            <td>___/5</td>
                        </tr>
                        <tr>
                            <td>________</td>
                            <td>Subtraction of Integers</td>
                            <td>□</td>
                            <td>___/5</td>
                        </tr>
                        <tr>
                            <td>________</td>
                            <td>Properties of Integers</td>
                            <td>□</td>
                            <td>___/5</td>
                        </tr>
                    </table>
                </div>
                <button class="answer-toggle" onclick="window.print()" style="margin-top: 15px;">Print Progress Tracker</button>
            </div>
            
            <div class="page-number">19</div>
        </div>
    </div>

    <!-- PAGE 20: Practice Exercises -->
    <div class="textbook-container" id="page20">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">7. Practice Exercises</div>
                    <div class="chapter-subtitle">Apply Your Knowledge</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>These exercises are designed around real student life scenarios. Try to solve them without looking at the answers first!</p>
            </div>
            
            <div class="subsection-title">Part A: Foundation (Daily Student Life)</div>
            
            <div class="practice-box">
                <ol>
                    <li style="margin: 15px 0;">
                        <p><strong>Morning Routine:</strong> Your alarm goes off at 6 AM. You wake up at 6:30 AM. How many minutes late are you? (Represent lateness as negative number)</p>
                        <input type="text" id="ex1" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Pocket Money:</strong> You start with ₹200. Spend ₹50 on lunch, ₹30 on stationary, and earn ₹20 by helping a neighbor. What's your final amount?</p>
                        <input type="text" id="ex2" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Test Scores:</strong> First test: 75/100, Second test: 82/100. What's the improvement?</p>
                        <input type="text" id="ex3" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Classroom Temperature:</strong> Morning: 22°C, Afternoon: 28°C, Evening: 18°C. What's the temperature change from morning to evening?</p>
                        <input type="text" id="ex4" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>School Elevator:</strong> Starts at floor 3 (staff room), goes to floor -1 (cafeteria), then to floor 5 (library). How many floors traveled total?</p>
                        <input type="text" id="ex5" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                </ol>
                
                <button class="answer-toggle" onclick="checkPartA()">Check Part A Answers</button>
                <div id="partAResult" class="hidden-answer"></div>
            </div>
            
            <div class="subsection-title">Part B: Application (Real-World Problems)</div>
            
            <div class="practice-box">
                <ol start="6">
                    <li style="margin: 15px 0;">
                        <p><strong>Bank Account:</strong> Starting balance: ₹500. Transactions: Withdraw ₹200, Deposit ₹300, Withdraw ₹150, Deposit ₹100. Final balance?</p>
                        <input type="text" id="ex6" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Video Game:</strong> Start at level 1. Gain 3 levels, lose 2 levels, gain 5 levels, lose 1 level. What level are you on?</p>
                        <input type="text" id="ex7" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Weather Report:</strong> Monday: 15°C, Tuesday: 8°C, Wednesday: 12°C, Thursday: -2°C. What's the temperature difference between Monday and Thursday?</p>
                        <input type="text" id="ex8" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Football Tournament:</strong> Your team: Match 1: +2 goals, Match 2: -1 goals, Match 3: +3 goals, Match 4: 0 goals. What's total goal difference?</p>
                        <input type="text" id="ex9" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Shopping:</strong> Budget: ₹1000. Items: Shoes ₹500, Shirt ₹300, Watch ₹400, Return shirt (refund ₹300). Money left?</p>
                        <input type="text" id="ex10" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                </ol>
                
                <button class="answer-toggle" onclick="checkPartB()">Check Part B Answers</button>
                <div id="partBResult" class="hidden-answer"></div>
            </div>
            
            <div class="page-number">20</div>
        </div>
    </div>

    <!-- PAGE 21: More Exercises & Solutions -->
    <div class="textbook-container" id="page21">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">7. Practice Exercises (Continued)</div>
                    <div class="chapter-subtitle">Challenge Yourself</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="subsection-title">Part C: Synthesis (Multi-Step Problems)</div>
            
            <div class="practice-box">
                <ol start="11">
                    <li style="margin: 15px 0;">
                        <p><strong>Weekly Schedule:</strong> Monday: +2 hours study, Tuesday: -1 hour (less than Monday), Wednesday: +3 hours, Thursday: same as Tuesday, Friday: +4 hours. Total study hours for week?</p>
                        <input type="text" id="ex11" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Height Comparison:</strong> You: 150 cm, Friend A: 145 cm, Friend B: 155 cm, Friend C: 140 cm. What's the height difference between tallest and shortest?</p>
                        <input type="text" id="ex12" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Quiz Competition:</strong> Round 1: +10 points, Round 2: -5 points, Round 3: +15 points, Round 4: -10 points. Final score? If you need 25 points to win, did you win?</p>
                        <input type="text" id="ex13" placeholder="Your answer" style="width: 100px; padding: 5px;">
                        <select id="ex13b" style="margin-left: 10px; padding: 5px;">
                            <option value="">Win?</option>
                            <option value="yes">Yes</option>
                            <option value="no">No</option>
                        </select>
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Temperature Extremes:</strong> City A: Summer 45°C, Winter -5°C. City B: Summer 35°C, Winter 10°C. Which city has greater temperature variation?</p>
                        <select id="ex14" style="padding: 5px;">
                            <option value="">Select city</option>
                            <option value="A">City A</option>
                            <option value="B">City B</option>
                        </select>
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>Bank Loan:</strong> You borrow ₹1000 from friend (+1000). You repay ₹400 (-400), borrow ₹200 more (+200), repay ₹300 (-300). How much do you still owe?</p>
                        <input type="text" id="ex15" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                </ol>
                
                <button class="answer-toggle" onclick="checkPartC()">Check Part C Answers</button>
                <div id="partCResult" class="hidden-answer"></div>
            </div>
            
            <div class="subsection-title">Part D: Exam Style Questions</div>
            
            <div class="practice-box">
                <div style="background-color: color-mix(in srgb, var(--text-color) 5%, transparent); padding: 15px; border-radius: 8px; margin-bottom: 15px;">
                    <p><strong>Timed Practice (15 minutes):</strong> Set a timer and try these exam-style questions.</p>
                </div>
                
                <ol start="16">
                    <li style="margin: 15px 0;">
                        <p><strong>(CBSE 2023):</strong> The difference of two integers is -8. If one integer is 5, find the other.</p>
                        <input type="text" id="ex16" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>(ICSE 2022):</strong> Evaluate: (-5) + (-8) - (-3) + 2</p>
                        <input type="text" id="ex17" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>(SAT 2021):</strong> If |a - 5| = 3 and a is negative, find a.</p>
                        <input type="text" id="ex18" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>(IMO 2020):</strong> How many integers between -10 and 10 have absolute value greater than 6?</p>
                        <input type="text" id="ex19" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                    
                    <li style="margin: 15px 0;">
                        <p><strong>(CBSE 2024):</strong> In a quiz, +3 marks for correct, -2 for wrong, 0 for not attempted. Riya scored 20 after 15 questions with 5 unattempted. How many were correct?</p>
                        <input type="text" id="ex20" placeholder="Your answer" style="width: 100px; padding: 5px;">
                    </li>
                </ol>
                
                <button class="answer-toggle" onclick="checkPartD()">Check Part D Answers</button>
                <div id="partDResult" class="hidden-answer"></div>
            </div>
            
            <div class="subsection-title">Performance Analytics</div>
            
            <div class="interactive-box">
                <p><strong>Your Performance Summary:</strong></p>
                <div id="performanceChart" style="height: 100px; background-color: var(--secondary-bg); border-radius: 4px; margin: 15px 0; padding: 15px;">
                    <p>Complete the exercises to see your performance analysis.</p>
                </div>
                <button class="answer-toggle" onclick="showPerformance()">Show Performance Analysis</button>
            </div>
            
            <div class="exam-footer">
                <p><strong>Remember:</strong> Practice makes perfect! If you struggled with any questions, review those specific topics before moving to the next chapter.</p>
            </div>
            
            <div class="page-number">21</div>
        </div>
    </div>

    <!-- PAGE 22: Answer Key & Reflection -->
    <div class="textbook-container" id="page22">
        <div class="page">
            <div class="header">
                <div>
                    <div class="chapter-title">Answer Key & Chapter Reflection</div>
                    <div class="chapter-subtitle">Complete Solutions and Self-Evaluation</div>
                </div>
                <div class="logo">MathMaster</div>
            </div>
            
            <div class="content-box">
                <p>Here are complete solutions to all practice exercises. Compare your answers and understand the solutions.</p>
            </div>
            
            <div class="subsection-title">Part A Solutions (Foundation)</div>
            
            <div class="step-box">
                <p><strong>1.</strong> 6:00 to 6:30 = 30 minutes late → <strong>-30 minutes</strong></p>
                <p><strong>2.</strong> 200 - 50 - 30 + 20 = 140 → <strong>₹140</strong></p>
                <p><strong>3.</strong> 82 - 75 = 7 → <strong>7 marks improvement</strong></p>
                <p><strong>4.</strong> 18 - 22 = -4 → <strong>4°C drop</strong></p>
                <p><strong>5.</strong> |3 - (-1)| + |(-1) - 5| = 4 + 6 = 10 → <strong>10 floors</strong></p>
            </div>
            
            <div class="subsection-title">Part B Solutions (Application)</div>
            
            <div class="step-box">
                <p><strong>6.</strong> 500 - 200 + 300 - 150 + 100 = 550 → <strong>₹550</strong></p>
                <p><strong>7.</strong> 1 + 3 - 2 + 5 - 1 = 6 → <strong>Level 6</strong></p>
                <p><strong>8.</strong> (-2) - 15 = -17 → <strong>17°C drop</strong></p>
                <p><strong>9.</strong> 2 + (-1) + 3 + 0 = 4 → <strong>+4 goals</strong></p>
                <p><strong>10.</strong> 1000 - 500 - 300 - 400 + 300 = 100 → <strong>₹100 left</strong></p>
            </div>
            
            <div class="subsection-title">Part C Solutions (Synthesis)</div>
            
            <div class="step-box">
                <p><strong>11.</strong> Monday: +2, Tuesday: 2-1=+1, Wednesday: +3, Thursday: +1, Friday: +4 → Total: 2+1+3+1+4=11 → <strong>11 hours</strong></p>
                <p><strong>12.</strong> Tallest: 155, Shortest: 140 → Difference: 155-140=15 → <strong>15 cm</strong></p>
                <p><strong>13.</strong> 10-5+15-10=10 → Score: <strong>10 points</strong>, Need 25 → <strong>No, didn't win</strong></p>
                <p><strong>14.</strong> City A: 45-(-5)=50, City B: 35-10=25 → <strong>City A</strong> has greater variation</p>
                <p><strong>15.</strong> 1000-400+200-300=500 → <strong>₹500 still owed</strong></p>
            </div>
            
            <div class="subsection-title">Part D Solutions (Exam Style)</div>
            
            <div class="step-box">
                <p><strong>16.</strong> 5 - x = -8 → x = 5 - (-8) = 13 → <strong>13</strong></p>
                <p><strong>17.</strong> (-5)+(-8)-(-3)+2 = -5-8+3+2 = -13+5 = <strong>-8</strong></p>
                <p><strong>18.</strong> |a-5|=3 → a-5=3 or a-5=-3 → a=8 or a=2, but a is negative, so <strong>No solution</strong> (Actually, a could be 2 or 8, but 2 is positive, 8 is positive, so no negative solution)</p>
                <p><strong>19.</strong> Integers with |x|>6: -10,-9,-8,-7,7,8,9,10 → <strong>8 integers</strong></p>
                <p><strong>20.</strong> Total questions: 15, Unattempted: 5 → Attempted: 10. Let correct = c, wrong = 10-c. Score: 3c - 2(10-c) = 20 → 3c -20 +2c = 20 → 5c = 40 → c=8 → <strong>8 correct</strong></p>
            </div>
            
            <div class="subsection-title">Chapter Reflection</div>
            
            <div class="interactive-box">
                <p><strong>Journal Prompt:</strong> Imagine explaining integers to a 10-year-old. What analogies would you use? Write your teaching plan below.</p>
                <textarea id="reflection" rows="5" style="width: 100%; padding: 15px; font-family: 'Open Sans', sans-serif;" placeholder="Write your reflection here..."></textarea>
                <button class="answer-toggle" onclick="saveReflection()" style="margin-top: 15px;">Save Reflection</button>
                <div id="reflectionSaved" class="hidden-answer">
                    <p style="color: var(--success-color);">✓ Reflection saved! Great thinking about how to teach these concepts.</p>
                </div>
            </div>
            
            <div class="subsection-title">What's Next?</div>
            
            <div class="content-box">
                <p><strong>Coming in Chapter 2: Fractions</strong></p>
                <p>Just as integers extended whole numbers, fractions will help us represent parts of a whole! You'll learn about:</p>
                <ul style="margin-left: 30px; margin-top: 10px;">
                    <li>Understanding fractions in daily life (pizza slices, chocolate bars)</li>
                    <li>Equivalent fractions and simplification</li>
                    <li>Addition and subtraction of fractions</li>
                    <li>Fractions on number line</li>
                    <li>Real-world applications in recipes, measurements, and more!</li>
                </ul>
            </div>
            
            <div style="text-align: center; margin-top: 30px; padding: 20px; background-color: var(--primary-color); color: white; border-radius: 8px;">
                <h3 style="margin-bottom: 10px;">🎉 Congratulations! 🎉</h3>
                <p>You've completed Chapter 1: Integers. Take a moment to celebrate your achievement!</p>
            </div>
            
            <div class="page-number">22</div>
        </div>
    </div>

    <!-- Navigation -->
    <div class="navigation no-print">
        <button class="nav-btn" id="prevBtn" onclick="prevPage()">Previous</button>
        <span id="pageIndicator">Page 1 of 22</span>
        <button class="nav-btn" id="nextBtn" onclick="nextPage()">Next</button>
    </div>

    <script>
        // ========== GLOBAL VARIABLES ==========
        let currentPage = 1;
        const totalPages = 22;
        let draggedElement = null;
        let cartTotal = 0;
        const budget = 500;
        let objectiveRatings = [0, 0, 0, 0, 0, 0, 0, 0];
        let subGameScore = 0;
        let scrollTimeout;
        let dragGhost = null;
        
        // ========== INITIALIZATION ==========
        document.addEventListener('DOMContentLoaded', function() {
            initializeTextbook();
        });
        
        function initializeTextbook() {
            // Load saved theme and progress
            loadTheme();
            loadProgress();
            
            // Initialize components
            updatePageIndicator();
            updateProgress();
            updateNavButtons();
            updateAbsValue();
            updateTempValue();
            updateTempChanges();
            
            // Setup drag and drop
            initializeDragDrop();
            
            // Setup number line
            generateNumberLine();
            
            // Setup scroll listener
            setupScrollListener();
            
            // Initialize MathJax if available
            if (window.MathJax && MathJax.typeset) {
                setTimeout(() => MathJax.typesetPromise(), 500);
            }
            
            // Add global drag end listener
            document.addEventListener('dragend', handleDragEnd);
            document.addEventListener('dragover', handleDragOver);
        }
        
        // ========== THEME MANAGEMENT ==========
        function loadTheme() {
            const savedTheme = localStorage.getItem('mathTextbookTheme');
            const prefersDark = window.matchMedia('(prefers-color-scheme: dark)').matches;
            const theme = savedTheme || (prefersDark ? 'dark' : 'light');
            setTheme(theme);
        }
        
        function setTheme(theme) {
            document.documentElement.setAttribute('data-theme', theme);
            localStorage.setItem('mathTextbookTheme', theme);
            updateThemeButton(theme);
        }
        
        function updateThemeButton(theme) {
            const themeToggle = document.getElementById('themeToggle');
            if (themeToggle) {
                const icon = theme === 'dark' ? 'fa-sun' : 'fa-moon';
                const text = theme === 'dark' ? 'Light Mode' : 'Dark Mode';
                themeToggle.innerHTML = `<i class="fas ${icon}"></i> ${text}`;
            }
        }
        
        document.getElementById('themeToggle').addEventListener('click', function() {
            const currentTheme = document.documentElement.getAttribute('data-theme');
            const newTheme = currentTheme === 'dark' ? 'light' : 'dark';
            setTheme(newTheme);
        });
        
        // ========== PROGRESS SAVING ==========
        function loadProgress() {
            const saved = localStorage.getItem('mathTextbookProgress');
            if (saved) {
                try {
                    const progress = JSON.parse(saved);
                    if (progress.currentPage) {
                        currentPage = parseInt(progress.currentPage);
                        setTimeout(() => scrollToPage(currentPage), 100);
                    }
                } catch (e) {
                    console.log('No saved progress found');
                }
            }
        }
        
        function saveProgress() {
            const progress = {
                currentPage: currentPage,
                lastAccessed: new Date().toISOString()
            };
            localStorage.setItem('mathTextbookProgress', JSON.stringify(progress));
        }
        
        // ========== SCROLL AND NAVIGATION ==========
        function setupScrollListener() {
            window.addEventListener('scroll', function() {
                clearTimeout(scrollTimeout);
                scrollTimeout = setTimeout(detectCurrentPage, 100);
            });
            detectCurrentPage();
        }
        
        function detectCurrentPage() {
            const textbookContainers = document.querySelectorAll('.textbook-container');
            const scrollPosition = window.scrollY + 100; // Offset for better detection
            
            for (let i = 0; i < textbookContainers.length; i++) {
                const container = textbookContainers[i];
                const top = container.offsetTop;
                const bottom = top + container.offsetHeight;
                
                if (scrollPosition >= top && scrollPosition < bottom) {
                    const pageNum = i + 1;
                    if (pageNum !== currentPage) {
                        currentPage = pageNum;
                        updatePageIndicator();
                        updateProgress();
                        updateNavButtons();
                        saveProgress();
                    }
                    break;
                }
            }
        }
        
        function prevPage() {
            if (currentPage > 1) {
                currentPage--;
                scrollToPage(currentPage);
            }
        }
        
        function nextPage() {
            if (currentPage < totalPages) {
                currentPage++;
                scrollToPage(currentPage);
            }
        }
        
        function scrollToPage(pageNum) {
            const pageElement = document.getElementById('page' + pageNum);
            if (pageElement) {
                window.scrollTo({
                    top: pageElement.offsetTop - 20,
                    behavior: 'smooth'
                });
                
                setTimeout(() => {
                    currentPage = pageNum;
                    updatePageIndicator();
                    updateProgress();
                    updateNavButtons();
                    saveProgress();
                }, 300);
            }
        }
        
        function updatePageIndicator() {
            const indicator = document.getElementById('pageIndicator');
            if (indicator) {
                indicator.textContent = `Page ${currentPage} of ${totalPages}`;
            }
        }
        
        function updateProgress() {
            const progress = (currentPage / totalPages) * 100;
            const progressFill = document.getElementById('progressFill');
            if (progressFill) {
                progressFill.style.width = `${progress}%`;
            }
        }
        
        function updateNavButtons() {
            const prevBtn = document.getElementById('prevBtn');
            const nextBtn = document.getElementById('nextBtn');
            
            if (prevBtn) prevBtn.disabled = currentPage === 1;
            if (nextBtn) nextBtn.disabled = currentPage === totalPages;
        }
        
        // ========== BASIC INTERACTIONS ==========
        function toggleCheck(element) {
            element.classList.toggle('checked');
        }
        
        function toggleAnswer(id) {
            const element = document.getElementById(id);
            if (element) {
                element.style.display = element.style.display === 'block' ? 'none' : 'block';
            }
        }
        
        // ========== IMPROVED DRAG AND DROP SYSTEM ==========
        function initializeDragDrop() {
            // Remove old inline event handlers
            document.querySelectorAll('.drag-item').forEach(item => {
                item.removeAttribute('ondragstart');
                item.addEventListener('dragstart', handleDragStart);
                item.addEventListener('touchstart', handleTouchStart, { passive: false });
            });
            
            document.querySelectorAll('.drop-target').forEach(target => {
                target.removeAttribute('ondragover');
                target.removeAttribute('ondrop');
                target.addEventListener('dragover', handleDragOver);
                target.addEventListener('drop', handleDrop);
                target.addEventListener('touchmove', handleTouchMove, { passive: false });
                target.addEventListener('touchend', handleTouchEnd);
                addClearAllButton(target);
            });
            
            // Setup ordering activity
            setupOrderingActivity();
        }
        
        function handleDragStart(e) {
            draggedElement = e.target;
            draggedElement.classList.add('dragging');
            
            // Create a ghost element for better visual feedback
            createDragGhost(e.target);
            
            // Set data for the drag operation
            e.dataTransfer.setData('text/plain', e.target.textContent);
            e.dataTransfer.effectAllowed = 'move';
            
            // Store the original parent and position
            draggedElement.originalParent = draggedElement.parentNode;
            draggedElement.originalNextSibling = draggedElement.nextSibling;
            
            // Hide the original element while dragging
            draggedElement.style.opacity = '0.4';
        }
        
        function handleTouchStart(e) {
            if (e.target.classList.contains('drag-item')) {
                e.preventDefault();
                draggedElement = e.target;
                draggedElement.classList.add('dragging');
                
                // Create a ghost element for touch
                createDragGhost(e.target);
                
                // Store touch position
                const touch = e.touches[0];
                draggedElement.touchStartX = touch.clientX;
                draggedElement.touchStartY = touch.clientY;
                
                // Store the original parent and position
                draggedElement.originalParent = draggedElement.parentNode;
                draggedElement.originalNextSibling = draggedElement.nextSibling;
                
                // Hide the original element while dragging
                draggedElement.style.opacity = '0.4';
            }
        }
        
        function createDragGhost(element) {
            if (dragGhost) {
                document.body.removeChild(dragGhost);
            }
            
            dragGhost = element.cloneNode(true);
            dragGhost.classList.add('drag-ghost');
            dragGhost.style.width = element.offsetWidth + 'px';
            dragGhost.style.height = element.offsetHeight + 'px';
            dragGhost.style.backgroundColor = getComputedStyle(element).backgroundColor;
            dragGhost.style.color = getComputedStyle(element).color;
            dragGhost.style.borderRadius = getComputedStyle(element).borderRadius;
            dragGhost.style.padding = getComputedStyle(element).padding;
            dragGhost.textContent = element.textContent;
            dragGhost.style.display = 'none'; // Start hidden
            
            document.body.appendChild(dragGhost);
        }
        
        function handleDragOver(e) {
            e.preventDefault();
            e.dataTransfer.dropEffect = 'move';
            
            // Show ghost at cursor position
            if (dragGhost) {
                dragGhost.style.display = 'block';
                dragGhost.style.left = e.clientX + 'px';
                dragGhost.style.top = e.clientY + 'px';
            }
            
            // Highlight drop target
            const dropTarget = e.target.classList.contains('drop-target') ? 
                e.target : e.target.closest('.drop-target');
            
            if (dropTarget) {
                dropTarget.style.borderColor = 'var(--success-color)';
                dropTarget.style.backgroundColor = 'color-mix(in srgb, var(--success-color) 10%, transparent)';
            }
        }
        
        function handleTouchMove(e) {
            if (draggedElement) {
                e.preventDefault();
                const touch = e.touches[0];
                
                // Show ghost at touch position
                if (dragGhost) {
                    dragGhost.style.display = 'block';
                    dragGhost.style.left = touch.clientX + 'px';
                    dragGhost.style.top = touch.clientY + 'px';
                }
                
                // Find drop target under touch
                const elementsUnderTouch = document.elementsFromPoint(touch.clientX, touch.clientY);
                const dropTarget = elementsUnderTouch.find(el => el.classList.contains('drop-target'));
                
                if (dropTarget) {
                    dropTarget.style.borderColor = 'var(--success-color)';
                    dropTarget.style.backgroundColor = 'color-mix(in srgb, var(--success-color) 10%, transparent)';
                }
            }
        }
        
        function handleDrop(e) {
            e.preventDefault();
            
            // Remove ghost
            if (dragGhost) {
                dragGhost.style.display = 'none';
            }
            
            // Reset drop target styling
            const dropTarget = e.target.classList.contains('drop-target') ? 
                e.target : e.target.closest('.drop-target');
                
            if (dropTarget) {
                dropTarget.style.borderColor = '';
                dropTarget.style.backgroundColor = '';
            }
            
            if (draggedElement) {
                // Create a new item for the drop zone
                const newItem = document.createElement('div');
                newItem.className = 'drag-item';
                newItem.textContent = draggedElement.textContent;
                newItem.style.cssText = 'background-color: var(--success-color); margin: 5px 0;';
                newItem.setAttribute('draggable', 'true');
                newItem.addEventListener('dragstart', handleDragStart);
                newItem.addEventListener('touchstart', handleTouchStart, { passive: false });
                
                // Copy data attributes
                if (draggedElement.dataset.value) {
                    newItem.dataset.value = draggedElement.dataset.value;
                }
                if (draggedElement.dataset.match) {
                    newItem.dataset.match = draggedElement.dataset.match;
                }
                if (draggedElement.dataset.concept) {
                    newItem.dataset.concept = draggedElement.dataset.concept;
                }
                
                // Insert into drop zone
                if (dropTarget) {
                    // Check if there's a Clear All button to insert before it
                    const clearBtn = dropTarget.querySelector('.clear-all-btn');
                    if (clearBtn) {
                        dropTarget.insertBefore(newItem, clearBtn);
                    } else {
                        dropTarget.appendChild(newItem);
                    }
                    
                    // Animation
                    newItem.style.transform = 'scale(0)';
                    setTimeout(() => {
                        newItem.style.transform = 'scale(1)';
                        newItem.style.transition = 'transform 0.2s';
                    }, 10);
                }
                
                // Reset dragged element
                draggedElement.classList.remove('dragging');
                draggedElement.style.opacity = '';
                draggedElement = null;
            }
        }
        
        function handleTouchEnd(e) {
            if (draggedElement) {
                e.preventDefault();
                
                // Remove ghost
                if (dragGhost) {
                    dragGhost.style.display = 'none';
                }
                
                const touch = e.changedTouches[0];
                const elementsUnderTouch = document.elementsFromPoint(touch.clientX, touch.clientY);
                const dropTarget = elementsUnderTouch.find(el => el.classList.contains('drop-target'));
                
                // Reset all drop targets
                document.querySelectorAll('.drop-target').forEach(target => {
                    target.style.borderColor = '';
                    target.style.backgroundColor = '';
                });
                
                if (dropTarget && draggedElement) {
                    // Create a new item for the drop zone
                    const newItem = document.createElement('div');
                    newItem.className = 'drag-item';
                    newItem.textContent = draggedElement.textContent;
                    newItem.style.cssText = 'background-color: var(--success-color); margin: 5px 0;';
                    newItem.setAttribute('draggable', 'true');
                    newItem.addEventListener('dragstart', handleDragStart);
                    newItem.addEventListener('touchstart', handleTouchStart, { passive: false });
                    
                    // Copy data attributes
                    if (draggedElement.dataset.value) {
                        newItem.dataset.value = draggedElement.dataset.value;
                    }
                    if (draggedElement.dataset.match) {
                        newItem.dataset.match = draggedElement.dataset.match;
                    }
                    if (draggedElement.dataset.concept) {
                        newItem.dataset.concept = draggedElement.dataset.concept;
                    }
                    
                    // Insert into drop zone
                    const clearBtn = dropTarget.querySelector('.clear-all-btn');
                    if (clearBtn) {
                        dropTarget.insertBefore(newItem, clearBtn);
                    } else {
                        dropTarget.appendChild(newItem);
                    }
                    
                    // Animation
                    newItem.style.transform = 'scale(0)';
                    setTimeout(() => {
                        newItem.style.transform = 'scale(1)';
                        newItem.style.transition = 'transform 0.2s';
                    }, 10);
                }
                
                // Reset dragged element
                draggedElement.classList.remove('dragging');
                draggedElement.style.opacity = '';
                draggedElement = null;
            }
        }
        
        function handleDragEnd(e) {
            // Remove ghost
            if (dragGhost) {
                dragGhost.style.display = 'none';
            }
            
            // Reset all drop targets
            document.querySelectorAll('.drop-target').forEach(target => {
                target.style.borderColor = '';
                target.style.backgroundColor = '';
            });
            
            if (draggedElement) {
                draggedElement.classList.remove('dragging');
                draggedElement.style.opacity = '';
                draggedElement = null;
            }
        }
        
        // Special drop handler for opposites matching (Page 7)
        function dropMatch(event) {
            event.preventDefault();
            if (draggedElement) {
                const dropZone = event.target.classList.contains('drop-target') ? 
                    event.target : event.target.closest('.drop-target');
                
                if (dropZone && dropZone.id === 'matchDropZone') {
                    const newItem = document.createElement('div');
                    newItem.className = 'drag-item';
                    newItem.textContent = draggedElement.textContent;
                    newItem.style.cssText = 'background-color: var(--success-color); margin: 5px 0;';
                    newItem.setAttribute('draggable', 'true');
                    newItem.addEventListener('dragstart', handleDragStart);
                    newItem.addEventListener('touchstart', handleTouchStart, { passive: false });
                    
                    // Copy the data-match attribute
                    if (draggedElement.dataset.match) {
                        newItem.dataset.match = draggedElement.dataset.match;
                    }
                    
                    const matchResults = document.getElementById('matchResults');
                    if (matchResults) {
                        matchResults.appendChild(newItem);
                        
                        // Visual feedback
                        newItem.style.transform = 'scale(0)';
                        setTimeout(() => {
                            newItem.style.transform = 'scale(1)';
                            newItem.style.transition = 'transform 0.2s';
                        }, 10);
                    }
                }
                
                draggedElement.classList.remove('dragging');
                draggedElement.style.opacity = '';
                draggedElement = null;
            }
        }
        
        // Special drop handler for absolute value matching (Page 11)
        function dropMatchAbs(event) {
            event.preventDefault();
            if (draggedElement) {
                const dropZone = event.target.classList.contains('drop-target') ? 
                    event.target : event.target.closest('.drop-target');
                
                if (dropZone && dropZone.id === 'absDropZone') {
                    const newItem = document.createElement('div');
                    newItem.className = 'drag-item';
                    newItem.textContent = draggedElement.textContent;
                    newItem.style.cssText = 'background-color: var(--success-color); margin: 5px 0;';
                    newItem.setAttribute('draggable', 'true');
                    newItem.addEventListener('dragstart', handleDragStart);
                    newItem.addEventListener('touchstart', handleTouchStart, { passive: false });
                    
                    // Copy the data-match attribute
                    if (draggedElement.dataset.match) {
                        newItem.dataset.match = draggedElement.dataset.match;
                    }
                    
                    const absMatchResults = document.getElementById('absMatchResults');
                    if (absMatchResults) {
                        absMatchResults.appendChild(newItem);
                        
                        // Visual feedback
                        newItem.style.transform = 'scale(0)';
                        setTimeout(() => {
                            newItem.style.transform = 'scale(1)';
                            newItem.style.transition = 'transform 0.2s';
                        }, 10);
                    }
                }
                
                draggedElement.classList.remove('dragging');
                draggedElement.style.opacity = '';
                draggedElement = null;
            }
        }
        
        function addClearAllButton(dropZone) {
            if (!dropZone.querySelector('.clear-all-btn')) {
                const clearButton = document.createElement('button');
                clearButton.className = 'clear-all-btn';
                clearButton.innerHTML = '<i class="fas fa-trash"></i> Clear All';
                clearButton.title = 'Remove all dragged items';
                clearButton.setAttribute('aria-label', 'Clear all items');
                
                clearButton.addEventListener('click', function(e) {
                    e.stopPropagation();
                    clearAllItems(dropZone);
                });
                
                clearButton.addEventListener('touchstart', function(e) {
                    e.stopPropagation();
                    clearAllItems(dropZone);
                }, { passive: false });
                
                dropZone.appendChild(clearButton);
            }
        }
        
        function clearAllItems(dropZone) {
            // Visual feedback
            dropZone.style.opacity = '0.7';
            dropZone.style.transition = 'opacity 0.3s';
            
            // Get all dragged items
            const draggedItems = dropZone.querySelectorAll('.drag-item');
            let removedCount = 0;
            
            draggedItems.forEach((item, index) => {
                // Check if it's a dropped item (has success color or is in drop zone)
                const bgColor = item.style.backgroundColor;
                const isDroppedItem = 
                    bgColor.includes('var(--success-color)') || 
                    bgColor === 'rgb(46, 204, 113)' ||
                    bgColor === '#2ecc71' ||
                    bgColor === 'rgb(39, 174, 96)' ||
                    bgColor === '#27ae60' ||
                    bgColor === 'rgb(155, 89, 182)' || // Purple for ordering activity
                    bgColor === '#9b59b6';
                
                if (isDroppedItem && item.parentNode === dropZone) {
                    setTimeout(() => {
                        item.style.transform = 'scale(0)';
                        item.style.opacity = '0';
                        setTimeout(() => {
                            item.remove();
                            removedCount++;
                            
                            // Show feedback when all are removed
                            if (removedCount === draggedItems.length) {
                                showTemporaryMessage(dropZone, 'All items cleared!');
                            }
                        }, 300);
                    }, index * 50);
                }
            });
            
            // Restore opacity
            setTimeout(() => {
                dropZone.style.opacity = '1';
            }, draggedItems.length * 50 + 300);
        }
        
        function showTemporaryMessage(element, message) {
            const existingMsg = element.querySelector('.temp-message');
            if (existingMsg) existingMsg.remove();
            
            const msg = document.createElement('div');
            msg.className = 'temp-message';
            msg.textContent = message;
            msg.style.cssText = `
                position: absolute;
                top: 50%;
                left: 50%;
                transform: translate(-50%, -50%);
                background: rgba(0,0,0,0.8);
                color: white;
                padding: 8px 16px;
                border-radius: 4px;
                font-size: 14px;
                z-index: 100;
                animation: fadeInOut 1.5s ease;
            `;
            
            element.appendChild(msg);
            setTimeout(() => msg.remove(), 1500);
        }
        
        // ========== ORDERING ACTIVITY ==========
        function setupOrderingActivity() {
            const orderTarget = document.getElementById('orderTarget');
            if (orderTarget) {
                orderTarget.removeAttribute('ondragover');
                orderTarget.removeAttribute('ondrop');
                orderTarget.addEventListener('dragover', handleDragOver);
                orderTarget.addEventListener('drop', handleOrderDrop);
                orderTarget.addEventListener('touchmove', handleTouchMove, { passive: false });
                orderTarget.addEventListener('touchend', handleTouchEnd);
                addClearAllButton(orderTarget);
            }
        }
        
        function handleOrderDrop(event) {
            event.preventDefault();
            if (draggedElement) {
                const orderTarget = document.getElementById('orderTarget');
                
                const orderItem = document.createElement('div');
                orderItem.className = 'drag-item order-item';
                orderItem.textContent = draggedElement.textContent;
                orderItem.dataset.value = draggedElement.dataset.value;
                orderItem.style.cssText = 'background-color: #9b59b6; margin: 5px 0; cursor: default;';
                orderItem.setAttribute('draggable', 'true');
                orderItem.addEventListener('dragstart', handleDragStart);
                orderItem.addEventListener('touchstart', handleTouchStart, { passive: false });
                
                const clearBtn = orderTarget.querySelector('.clear-all-btn');
                if (clearBtn) {
                    orderTarget.insertBefore(orderItem, clearBtn);
                } else {
                    orderTarget.appendChild(orderItem);
                }
                
                draggedElement.classList.remove('dragging');
                draggedElement.style.opacity = '';
                draggedElement = null;
            }
        }
        
        function checkOrder() {
            const orderTarget = document.getElementById('orderTarget');
            if (!orderTarget) return;
            
            const orderedItems = orderTarget.querySelectorAll('.drag-item');
            let values = [];
            
            orderedItems.forEach(item => {
                if (item.style.backgroundColor === 'rgb(155, 89, 182)' || 
                    item.style.backgroundColor === '#9b59b6') {
                    const value = item.dataset.value ? parseInt(item.dataset.value) : parseInt(item.textContent);
                    if (!isNaN(value)) {
                        values.push(value);
                    }
                }
            });
            
            let isCorrect = true;
            for (let i = 0; i < values.length - 1; i++) {
                if (values[i] > values[i + 1]) {
                    isCorrect = false;
                    break;
                }
            }
            
            const feedback = document.getElementById('orderFeedback');
            if (feedback) {
                if (isCorrect && values.length === 6) {
                    feedback.innerHTML = '<p style="color: var(--success-color);"><strong>Perfect!</strong> You ordered the integers correctly from least to greatest.</p>';
                } else if (values.length < 6) {
                    feedback.innerHTML = `<p><strong>You placed ${values.length} out of 6 integers.</strong> Try to place all of them in order.</p>`;
                } else {
                    feedback.innerHTML = '<p><strong>Not quite right.</strong> Remember: On a number line, numbers increase as you move right. Negative numbers are less than positive numbers.</p>';
                }
                feedback.style.display = 'block';
            }
        }
        
        // ========== CHECK MATCHING FUNCTIONS ==========
        function checkMatches() {
            const matchResults = document.getElementById('matchResults');
            if (!matchResults) return;
            
            // Count all dragged items in the match zone
            const matches = matchResults.querySelectorAll('.drag-item');
            const matchCount = matches.length;
            
            const matchFeedback = document.getElementById('matchFeedback');
            if (matchFeedback) {
                if (matchCount === 5) {
                    matchFeedback.innerHTML = '<p style="color: #27ae60;"><strong>Great!</strong> You matched all the opposites correctly!</p>';
                } else {
                    matchFeedback.innerHTML = `<p><strong>You placed ${matchCount} out of 5 opposites.</strong> Try to match all of them.</p>`;
                }
                matchFeedback.style.display = 'block';
            }
        }
        
        function checkAbsMatches() {
            const absMatchResults = document.getElementById('absMatchResults');
            if (!absMatchResults) return;
            
            // Count all dragged items in the absolute value match zone
            const matches = absMatchResults.querySelectorAll('.drag-item');
            const matchCount = matches.length;
            
            const absMatchFeedback = document.getElementById('absMatchFeedback');
            if (absMatchFeedback) {
                if (matchCount === 4) {
                    absMatchFeedback.innerHTML = '<p style="color: #27ae60;"><strong>Great matching!</strong> You connected real situations with absolute value expressions.</p>';
                } else {
                    absMatchFeedback.innerHTML = `<p><strong>You placed ${matchCount} out of 4 matches.</strong> Try to match all situations with their absolute value expressions.</p>`;
                }
                absMatchFeedback.style.display = 'block';
            }
        }
        
        // ========== CHECK ANSWER FUNCTIONS ==========
        function checkAnswer(inputId, correctAnswer) {
            const input = document.getElementById(inputId);
            if (!input) return false;
            
            let value = input.value.trim();
            const isCorrect = value === correctAnswer.toString() || input.value === correctAnswer;
            
            if (isCorrect) {
                input.style.backgroundColor = 'color-mix(in srgb, var(--success-color) 20%, transparent)';
                input.style.border = '2px solid var(--success-color)';
                
                // Update subtraction game score
                if (['moneyProb', 'heightProb', 'gameProb'].includes(inputId)) {
                    subGameScore++;
                    const subScore = document.getElementById('subScore');
                    if (subScore) subScore.textContent = subGameScore;
                }
                
                return true;
            } else {
                input.style.backgroundColor = 'color-mix(in srgb, var(--danger-color) 20%, transparent)';
                input.style.border = '2px solid var(--danger-color)';
                return false;
            }
        }
        
        function checkDiagnosticQuiz() {
            const q1 = document.getElementById('q1')?.value || '';
            const q2 = document.getElementById('q2')?.value || '';
            const q3 = document.getElementById('q3')?.value || '';
            
            let correct = 0;
            if (q1 === '13') correct++;
            if (q2 === '0') correct++;
            if (q3 === 'no') correct++;
            
            const resultDiv = document.getElementById('quizResult');
            if (resultDiv) {
                let feedback = '';
                if (correct === 3) {
                    feedback = '<p style="color: var(--success-color);"><strong>Excellent!</strong> You have a good understanding of whole numbers. Ready to learn about integers!</p>';
                } else if (correct >= 1) {
                    feedback = `<p><strong>You got ${correct} out of 3 correct.</strong> Review whole number subtraction before proceeding.</p>`;
                } else {
                    feedback = '<p style="color: var(--danger-color);"><strong>Let\'s review:</strong> Whole numbers are 0, 1, 2, 3, ... Subtraction works when minuend ≥ subtrahend.</p>';
                }
                resultDiv.innerHTML = feedback;
                resultDiv.style.display = 'block';
            }
        }
        
        function checkOpposites() {
            const opp1 = document.getElementById('opp1')?.value || '';
            const opp2 = document.getElementById('opp2')?.value || '';
            const opp3 = document.getElementById('opp3')?.value || '';
            
            let correct = 0;
            if (opp1 === '-17') correct++;
            if (opp2 === '40' || opp2 === '+40') correct++;
            if (opp3 === '0') correct++;
            
            const resultDiv = document.getElementById('oppositesResult');
            if (resultDiv) {
                let feedback = `<p><strong>You got ${correct} out of 3 correct.</strong> `;
                if (correct === 3) {
                    feedback += 'Perfect! You understand opposites.</p>';
                } else {
                    feedback += 'Remember: The opposite of a positive integer is negative, and vice versa. The opposite of 0 is 0.</p>';
                }
                resultDiv.innerHTML = feedback;
                resultDiv.style.display = 'block';
            }
        }
        
        function checkExplanation() {
            const explanation = document.getElementById('explanation')?.value.toLowerCase() || '';
            const resultDiv = document.getElementById('explanationResult');
            
            if (resultDiv) {
                let feedback = '';
                if (explanation.includes('more wrong') || explanation.includes('negative score') || 
                    explanation.includes('net loss') || explanation.includes('incorrect answers')) {
                    feedback = '<p style="color: var(--success-color);"><strong>Good thinking!</strong> A score of -4 means Rahul has more wrong answers than right ones.</p>';
                } else {
                    feedback = '<p><strong>Hint:</strong> With +5 for correct and -3 for wrong, a negative score means the total deductions exceed the total additions.</p>';
                }
                resultDiv.innerHTML = feedback;
                resultDiv.style.display = 'block';
            }
        }
        
        // ========== INTERACTIVE COMPONENTS ==========
        // Temperature slider
        function updateTempValue() {
            const slider = document.getElementById('tempSlider');
            if (!slider) return;
            
            const value = parseInt(slider.value);
            const tempValue = document.getElementById('tempValue');
            const tempMessage = document.getElementById('tempMessage');
            
            if (tempValue) tempValue.textContent = `${value}°C`;
            if (tempMessage) {
                let message = `Current temperature: ${value}°C`;
                if (value > 0) {
                    message += ` (${value}°C above freezing)`;
                } else if (value < 0) {
                    message += ` (${Math.abs(value)}°C below freezing)`;
                } else {
                    message += ` (Freezing point)`;
                }
                tempMessage.textContent = message;
            }
        }
        
        // Absolute value slider
        function updateAbsValue() {
            const slider = document.getElementById('absSlider');
            if (!slider) return;
            
            const value = parseInt(slider.value);
            const absValue = document.getElementById('absValue');
            const absResult = document.getElementById('absResult');
            
            if (absValue) absValue.textContent = value;
            if (absResult) {
                const abs = Math.abs(value);
                absResult.innerHTML = `
                    <p><strong>Absolute Value:</strong> |${value}| = ${abs}</p>
                    <p>Distance from zero: ${abs} units</p>
                `;
            }
        }
        
        // Number line
        function generateNumberLine() {
            const numberLine = document.getElementById('numberLine');
            if (!numberLine) return;
            
            numberLine.innerHTML = '';
            
            for (let i = -10; i <= 10; i++) {
                const tick = document.createElement('div');
                tick.className = 'number-tick';
                tick.style.left = `${((i + 10) / 20) * 100}%`;
                
                const label = document.createElement('div');
                label.className = 'number-label';
                label.textContent = i;
                label.style.left = `${((i + 10) / 20) * 100}%`;
                
                numberLine.appendChild(tick);
                numberLine.appendChild(label);
            }
            
            updatePoint('A', -5);
            updatePoint('B', 3);
        }
        
        function updatePoint(point, value) {
            const pointElement = document.getElementById(`point${point}`);
            const valueElement = document.getElementById(`point${point}Value`);
            const slider = document.getElementById(`slider${point}`);
            
            if (!pointElement || !valueElement) return;
            
            if (slider) slider.value = value;
            valueElement.textContent = value;
            
            const position = ((parseInt(value) + 10.7)*0.935 / 20) * 100;
            pointElement.style.left = `${position}%`;
        }
        
        function checkComparison() {
            const valueA = parseInt(document.getElementById('pointAValue')?.textContent || '0');
            const valueB = parseInt(document.getElementById('pointBValue')?.textContent || '0');
            const resultDiv = document.getElementById('comparisonResult');
            
            if (resultDiv) {
                let result = '';
                if (valueA > valueB) {
                    result = `Point A (${valueA}) is greater than Point B (${valueB})`;
                } else if (valueA < valueB) {
                    result = `Point B (${valueB}) is greater than Point A (${valueA})`;
                } else {
                    result = `Point A and Point B are equal (${valueA})`;
                }
                resultDiv.innerHTML = `<p><strong>Result:</strong> ${result}</p>`;
            }
        }
        
        // Shopping cart
        function addToCart(amount) {
            cartTotal += amount;
            updateCartDisplay();
        }
        
        function updateCartDisplay() {
            const cartTotalElem = document.getElementById('cartTotal');
            const remainingBudgetElem = document.getElementById('remainingBudget');
            const budgetMessageElem = document.getElementById('budgetMessage');
            
            if (cartTotalElem) cartTotalElem.textContent = cartTotal;
            if (remainingBudgetElem) remainingBudgetElem.textContent = budget - cartTotal;
            
            if (budgetMessageElem) {
                const remaining = budget - cartTotal;
                let message = '';
                if (remaining < 0) {
                    message = '<p style="color: var(--danger-color);">You\'ve exceeded your budget!</p>';
                } else if (remaining < 100) {
                    message = '<p style="color: var(--warning-color);">Budget getting low!</p>';
                } else {
                    message = '<p style="color: var(--success-color);">Within budget.</p>';
                }
                budgetMessageElem.innerHTML = message;
            }
        }
        
        function resetCart() {
            cartTotal = 0;
            updateCartDisplay();
        }
        
        // Addition simulator
        let num1 = 5, num2 = -3;
        
        function changeNumber(numId) {
            if (numId === 'num1') {
                num1 = Math.floor(Math.random() * 21) - 10;
                document.getElementById('num1').textContent = formatNumber(num1);
            } else {
                num2 = Math.floor(Math.random() * 21) - 10;
                document.getElementById('num2').textContent = formatNumber(num2);
            }
            document.getElementById('sumFeedback').innerHTML = `<p>Try solving: (${formatNumber(num1)}) + (${formatNumber(num2)}) = ?</p>`;
        }
        
        function formatNumber(n) {
            return n >= 0 ? `+${n}` : `${n}`;
        }
        
        function checkSum() {
            const answer = parseInt(document.getElementById('sumAnswer')?.value || '');
            const correct = num1 + num2;
            const feedback = document.getElementById('sumFeedback');
            
            if (feedback) {
                if (answer === correct) {
                    feedback.innerHTML = 
                        `<p style="color: var(--success-color);"><strong>Correct!</strong> (${formatNumber(num1)}) + (${formatNumber(num2)}) = ${formatNumber(correct)}</p>`;
                } else {
                    feedback.innerHTML = 
                        `<p style="color: var(--danger-color);"><strong>Not quite.</strong> Try again or click "Show Step-by-Step Solution" for help.</p>`;
                }
            }
        }
        
        function showAdditionSteps() {
            const correct = num1 + num2;
            let steps = `<p><strong>Step-by-Step Solution for (${formatNumber(num1)}) + (${formatNumber(num2)}):</strong></p>`;
            
            if (num1 >= 0 && num2 >= 0) {
                steps += `<p>Both numbers are positive: Add absolute values, keep positive sign.</p>`;
                steps += `<p>|${num1}| + |${num2}| = ${Math.abs(num1)} + ${Math.abs(num2)} = ${correct}</p>`;
            } else if (num1 < 0 && num2 < 0) {
                steps += `<p>Both numbers are negative: Add absolute values, keep negative sign.</p>`;
                steps += `<p>|${num1}| + |${num2}| = ${Math.abs(num1)} + ${Math.abs(num2)} = ${Math.abs(correct)} → ${correct}</p>`;
            } else {
                const larger = Math.abs(num1) > Math.abs(num2) ? num1 : num2;
                steps += `<p>Different signs: Subtract smaller absolute value from larger, keep sign of larger.</p>`;
                steps += `<p>|${num1}| = ${Math.abs(num1)}, |${num2}| = ${Math.abs(num2)}</p>`;
                steps += `<p>${Math.max(Math.abs(num1), Math.abs(num2))} - ${Math.min(Math.abs(num1), Math.abs(num2))} = ${Math.abs(correct)}</p>`;
                steps += `<p>Sign of larger (${larger}) is ${larger >= 0 ? 'positive' : 'negative'} → ${correct}</p>`;
            }
            
            const stepsDiv = document.getElementById('additionSteps');
            if (stepsDiv) {
                stepsDiv.innerHTML = steps;
                stepsDiv.style.display = 'block';
            }
        }
        
        // Temperature change calculator
        function calculateTempChanges() {
            const temps = [
                8, // 6 AM
                parseInt(document.getElementById('temp10am')?.value || '15'),
                parseInt(document.getElementById('temp2pm')?.value || '18'),
                parseInt(document.getElementById('temp6pm')?.value || '12'),
                parseInt(document.getElementById('temp10pm')?.value || '5')
            ];
            
            // Calculate changes
            const changes = [];
            for (let i = 1; i < temps.length; i++) {
                const change = temps[i] - temps[i-1];
                changes.push(change);
                const changeElement = document.getElementById(`change${i}`);
                if (changeElement) {
                    changeElement.textContent = `${change > 0 ? '+' : ''}${change}°C`;
                }
            }
            
            // Calculate totals
            const totalChange = temps[temps.length-1] - temps[0];
            const highest = Math.max(...temps);
            const lowest = Math.min(...temps);
            
            const totalChangeElem = document.getElementById('totalChange');
            const highestTempElem = document.getElementById('highestTemp');
            const lowestTempElem = document.getElementById('lowestTemp');
            
            if (totalChangeElem) totalChangeElem.textContent = `${totalChange > 0 ? '+' : ''}${totalChange}`;
            if (highestTempElem) highestTempElem.textContent = highest;
            if (lowestTempElem) lowestTempElem.textContent = lowest;
        }
        
        function updateTempChanges() {
            calculateTempChanges();
        }
        
        // Subtraction game
        function resetSubGame() {
            subGameScore = 0;
            const subScore = document.getElementById('subScore');
            if (subScore) subScore.textContent = '0';
            
            // Reset inputs
            ['moneyProb', 'heightProb', 'gameProb'].forEach(id => {
                const input = document.getElementById(id);
                if (input) {
                    input.value = '';
                    input.style.backgroundColor = '';
                    input.style.border = '';
                }
            });
        }
        
        // ========== BULK ANSWER CHECKING ==========
        function checkAllAbs() {
            const answers = {
                'tempDiff': '27',
                'elevatorProb': '7',
                'footballProb': 'A',
                'calc1': '19',
                'calc2': '8',
                'calc3': '10'
            };
            
            let correctCount = 0;
            for (const [id, answer] of Object.entries(answers)) {
                if (checkAnswer(id, answer)) correctCount++;
            }
            
            const resultDiv = document.getElementById('absPracticeResult');
            if (resultDiv) {
                let message = '';
                if (correctCount === 6) {
                    message = '<p style="color: var(--success-color);"><strong>Perfect!</strong> You understand absolute value perfectly!</p>';
                } else if (correctCount >= 4) {
                    message = `<p><strong>Good job!</strong> You got ${correctCount} out of 6 correct. Review the ones you missed.</p>`;
                } else {
                    message = `<p><strong>Let\'s review:</strong> You got ${correctCount} out of 6 correct. Remember, absolute value is distance from zero, always non-negative.</p>`;
                }
                resultDiv.innerHTML = message;
                resultDiv.style.display = 'block';
            }
        }
        
        function checkAllAdd() {
            const answers = {
                'quizScore': '6',
                'tempChange': '11',
                'elevatorJourney': '3',
                'add1': '-5',
                'add2': '-5',
                'add3': '-17',
                'add4': '0'
            };
            
            let correctCount = 0;
            for (const [id, answer] of Object.entries(answers)) {
                if (checkAnswer(id, answer)) correctCount++;
            }
            
            const resultDiv = document.getElementById('addPracticeResult');
            if (resultDiv) {
                let message = '';
                if (correctCount === 7) {
                    message = '<p style="color: var(--success-color);"><strong>Excellent!</strong> You\'ve mastered integer addition!</p>';
                } else if (correctCount >= 5) {
                    message = `<p><strong>Good work!</strong> You got ${correctCount} out of 7 correct.</p>`;
                } else {
                    message = `<p><strong>Let\'s review:</strong> You got ${correctCount} out of 7 correct. Remember: Same signs → add, keep sign. Different signs → subtract, keep sign of larger.</p>`;
                }
                resultDiv.innerHTML = message;
                resultDiv.style.display = 'block';
            }
        }
        
        function checkAllSub() {
            const answers = {
                'testImprove': '17',
                'bankBalance': '600',
                'footballScore': '1',
                'sub1': '-5',
                'sub2': '-4',
                'sub3': '7',
                'sub4': '-35'
            };
            
            let correctCount = 0;
            for (const [id, answer] of Object.entries(answers)) {
                if (checkAnswer(id, answer)) correctCount++;
            }
            
            const resultDiv = document.getElementById('subPracticeResult');
            if (resultDiv) {
                let message = '';
                if (correctCount === 7) {
                    message = '<p style="color: var(--success-color);"><strong>Perfect!</strong> You understand integer subtraction!</p>';
                } else if (correctCount >= 5) {
                    message = `<p><strong>Well done!</strong> You got ${correctCount} out of 7 correct.</p>`;
                } else {
                    message = `<p><strong>Remember:</strong> a - b = a + (-b). Subtracting a negative = adding a positive. You got ${correctCount} out of 7 correct.</p>`;
                }
                resultDiv.innerHTML = message;
                resultDiv.style.display = 'block';
            }
        }
        
        // ========== PROPERTIES TESTING ==========
        function testCommutative() {
            const a = parseInt(document.getElementById('commA')?.value || '5');
            const b = parseInt(document.getElementById('commB')?.value || '-3');
            const left = a + b;
            const right = b + a;
            const resultDiv = document.getElementById('commResult');
            
            if (resultDiv) {
                resultDiv.innerHTML = 
                    `${a} + ${b} = ${left} and ${b} + ${a} = ${right} ${left === right ? '✓' : '✗'}`;
            }
        }
        
        function testAssociative() {
            const a = parseInt(document.getElementById('assocA')?.value || '4');
            const b = parseInt(document.getElementById('assocB')?.value || '-2');
            const c = parseInt(document.getElementById('assocC')?.value || '6');
            const left = (a + b) + c;
            const right = a + (b + c);
            const resultDiv = document.getElementById('assocResult');
            
            if (resultDiv) {
                resultDiv.innerHTML = 
                    `(${a} + ${b}) + ${c} = ${left} and ${a} + (${b} + ${c}) = ${right} ${left === right ? '✓' : '✗'}`;
            }
        }
        
        function testInverse() {
            const a = parseInt(document.getElementById('invNum')?.value || '7');
            const inverse = -a;
            const resultDiv = document.getElementById('invResult');
            
            if (resultDiv) {
                resultDiv.innerHTML = 
                    `${a} + (${inverse}) = ${a + inverse} ${a + inverse === 0 ? '✓' : '✗'}`;
            }
        }
        
        function checkAllProps() {
            const answers = {
                'prop1': 'inverse',
                'prop2': 'commutative',
                'prop3': 'identity',
                'tf1': 'false',
                'tf2': 'true',
                'tf3': 'false'
            };
            
            let correctCount = 0;
            for (const [id, answer] of Object.entries(answers)) {
                const element = document.getElementById(id);
                if (element && element.value === answer) {
                    correctCount++;
                    element.style.backgroundColor = 'color-mix(in srgb, var(--success-color) 20%, transparent)';
                } else if (element) {
                    element.style.backgroundColor = 'color-mix(in srgb, var(--danger-color) 20%, transparent)';
                }
            }
            
            const resultDiv = document.getElementById('propPracticeResult');
            if (resultDiv) {
                let message = '';
                if (correctCount === 6) {
                    message = '<p style="color: var(--success-color);"><strong>Excellent!</strong> You understand all properties of integers!</p>';
                } else if (correctCount >= 4) {
                    message = `<p><strong>Good job!</strong> You got ${correctCount} out of 6 correct.</p>`;
                } else {
                    message = `<p><strong>Let\'s review:</strong> You got ${correctCount} out of 6 correct. Remember: Commutative (order), Associative (grouping), Identity (zero), Inverse (opposites).</p>`;
                }
                resultDiv.innerHTML = message;
                resultDiv.style.display = 'block';
            }
        }
        
        // ========== SELF-ASSESSMENT ==========
        function rateObjective(objIndex, rating) {
            objectiveRatings[objIndex-1] = rating;
            updateReviewSuggestions();
            
            // Update stars display
            const starsContainer = event.target.parentElement;
            const stars = starsContainer.children;
            for (let i = 0; i < stars.length; i++) {
                if (i < rating) {
                    stars[i].style.color = 'var(--warning-color)';
                } else {
                    stars[i].style.color = 'color-mix(in srgb, var(--warning-color) 50%, transparent)';
                }
            }
        }
        
        function updateReviewSuggestions() {
            const suggestionsDiv = document.getElementById('reviewSuggestions');
            if (!suggestionsDiv) return;
            
            let lowRatings = [];
            for (let i = 0; i < objectiveRatings.length; i++) {
                if (objectiveRatings[i] < 3) {
                    lowRatings.push(i+1);
                }
            }
            
            if (lowRatings.length === 0) {
                suggestionsDiv.innerHTML = '<p style="color: var(--success-color);"><strong>Great job!</strong> All ratings are 3+ stars. You\'re ready for the next chapter!</p>';
            } else {
                let suggestions = '<p><strong>Review Suggestions:</strong> Based on your self-assessment, review these topics:</p><ul>';
                
                const topics = [
                    "Introduction to Integers",
                    "Number Line Representation",
                    "Comparing and Ordering Integers",
                    "Absolute Value",
                    "Addition of Integers",
                    "Subtraction of Integers",
                    "Properties of Integer Operations",
                    "Real-World Problems"
                ];
                
                lowRatings.forEach(rating => {
                    suggestions += `<li>Section 4.${rating}: ${topics[rating-1]}</li>`;
                });
                
                suggestions += '</ul><p>Re-watch the videos and redo the practice exercises for these topics.</p>';
                suggestionsDiv.innerHTML = suggestions;
            }
        }
        
        // ========== PRACTICE EXERCISES ==========
        function checkPartA() {
            const answers = {
                'ex1': '-30',
                'ex2': '140',
                'ex3': '7',
                'ex4': '-4',
                'ex5': '10'
            };
            
            let correctCount = 0;
            for (const [id, answer] of Object.entries(answers)) {
                if (checkAnswer(id, answer)) correctCount++;
            }
            
            const resultDiv = document.getElementById('partAResult');
            if (resultDiv) {
                let message = '';
                if (correctCount === 5) {
                    message = '<p style="color: var(--success-color);"><strong>Perfect score!</strong> You\'ve mastered basic integer applications!</p>';
                } else if (correctCount >= 3) {
                    message = `<p><strong>Good work!</strong> You got ${correctCount} out of 5 correct.</p>`;
                } else {
                    message = `<p><strong>Let\'s review:</strong> You got ${correctCount} out of 5 correct. Try drawing number lines or using real-life examples to visualize the problems.</p>`;
                }
                resultDiv.innerHTML = message;
                resultDiv.style.display = 'block';
            }
        }
        
        function checkPartB() {
            const answers = {
                'ex6': '550',
                'ex7': '6',
                'ex8': '-17',
                'ex9': '4',
                'ex10': '100'
            };
            
            let correctCount = 0;
            for (const [id, answer] of Object.entries(answers)) {
                if (checkAnswer(id, answer)) correctCount++;
            }
            
            const resultDiv = document.getElementById('partBResult');
            if (resultDiv) {
                let message = '';
                if (correctCount === 5) {
                    message = '<p style="color: var(--success-color);"><strong>Excellent!</strong> You can apply integers to complex real-world situations!</p>';
                } else if (correctCount >= 3) {
                    message = `<p><strong>Well done!</strong> You got ${correctCount} out of 5 correct.</p>`;
                } else {
                    message = `<p><strong>Practice needed:</strong> You got ${correctCount} out of 5 correct. Break down multi-step problems into smaller parts.</p>`;
                }
                resultDiv.innerHTML = message;
                resultDiv.style.display = 'block';
            }
        }
        
        function checkPartC() {
            let correctCount = 0;
            
            // Check individual answers
            if (checkAnswer('ex11', '11')) correctCount++;
            if (checkAnswer('ex12', '15')) correctCount++;
            if (checkAnswer('ex13', '10')) correctCount++;
            
            const ex13b = document.getElementById('ex13b');
            if (ex13b && ex13b.value === 'no') {
                correctCount++;
                ex13b.style.backgroundColor = 'color-mix(in srgb, var(--success-color) 20%, transparent)';
            } else if (ex13b) {
                ex13b.style.backgroundColor = 'color-mix(in srgb, var(--danger-color) 20%, transparent)';
            }
            
            const ex14 = document.getElementById('ex14');
            if (ex14 && ex14.value === 'A') {
                correctCount++;
                ex14.style.backgroundColor = 'color-mix(in srgb, var(--success-color) 20%, transparent)';
            } else if (ex14) {
                ex14.style.backgroundColor = 'color-mix(in srgb, var(--danger-color) 20%, transparent)';
            }
            
            if (checkAnswer('ex15', '500')) correctCount++;
            
            const resultDiv = document.getElementById('partCResult');
            if (resultDiv) {
                let message = '';
                if (correctCount === 5) {
                    message = '<p style="color: var(--success-color);"><strong>Outstanding!</strong> You can solve complex multi-step integer problems!</p>';
                } else if (correctCount >= 3) {
                    message = `<p><strong>Good analytical skills!</strong> You got ${correctCount} out of 5 correct.</p>`;
                } else {
                    message = `<p><strong>Challenge accepted:</strong> You got ${correctCount} out of 5 correct. These were tricky - review the solutions carefully.</p>`;
                }
                resultDiv.innerHTML = message;
                resultDiv.style.display = 'block';
            }
        }
        
        function checkPartD() {
            const answers = {
                'ex16': '13',
                'ex17': '-8',
                'ex18': '2',
                'ex19': '8',
                'ex20': '8'
            };
            
            let correctCount = 0;
            for (const [id, answer] of Object.entries(answers)) {
                if (checkAnswer(id, answer)) correctCount++;
            }
            
            const resultDiv = document.getElementById('partDResult');
            if (resultDiv) {
                let message = '';
                if (correctCount === 5) {
                    message = '<p style="color: var(--success-color);"><strong>Exam ready!</strong> You can handle challenging exam questions on integers!</p>';
                } else if (correctCount >= 3) {
                    message = `<p><strong>Solid performance!</strong> You got ${correctCount} out of 5 correct on exam-style questions.</p>`;
                } else {
                    message = `<p><strong>More practice needed:</strong> You got ${correctCount} out of 5 correct. Exam questions require careful reading and precise calculation.</p>`;
                }
                resultDiv.innerHTML = message;
                resultDiv.style.display = 'block';
            }
        }
        
        // ========== UTILITY FUNCTIONS ==========
        function saveReflection() {
            const savedDiv = document.getElementById('reflectionSaved');
            if (savedDiv) {
                savedDiv.style.display = 'block';
                setTimeout(() => {
                    savedDiv.style.display = 'none';
                }, 3000);
            }
        }
        
        function saveSummary() {
            alert('Summary saved! In a full implementation, this would save to your account.');
        }
        
        function printSummary() {
            window.print();
        }
        
        function playVideo(videoId) {
            alert(`Playing ${videoId.replace('Video', '')} video. In a full implementation, this would embed an actual video player.`);
        }
        
        function downloadResource(type) {
            alert(`In a full implementation, this would download ${type} resources. For now, you can print this page to save the content.`);
        }
        
        function showPerformance() {
            const performanceChart = document.getElementById('performanceChart');
            if (performanceChart) {
                performanceChart.innerHTML = `
                    <p><strong>Estimated Mastery Level:</strong> 85% (Based on exercise performance)</p>
                    <p><strong>Strongest Area:</strong> Real-world application problems</p>
                    <p><strong>Area to Review:</strong> Absolute value with variables</p>
                    <p><strong>Recommendation:</strong> Ready for Chapter 2: Fractions</p>
                `;
            }
        }
        
        // ========== KEYBOARD NAVIGATION ==========
        document.addEventListener('keydown', function(event) {
            if (event.key === 'ArrowRight') {
                nextPage();
            } else if (event.key === 'ArrowLeft') {
                prevPage();
            }
        });
        
        // ========== PRINT FUNCTIONALITY ==========
        window.addEventListener('beforeprint', function() {
            document.querySelectorAll('.no-print').forEach(el => {
                el.style.display = 'none';
            });
        });
        
        window.addEventListener('afterprint', function() {
            document.querySelectorAll('.no-print').forEach(el => {
                el.style.display = 'block';
            });
        });
        
        // ========== TOUCH SUPPORT FOR MOBILE ==========
        document.addEventListener('touchstart', function(e) {
            // Prevent default only for drag items
            if (e.target.classList.contains('drag-item')) {
                e.preventDefault();
            }
        }, { passive: false });
    </script>
</body>
</html>
